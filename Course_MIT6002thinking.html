
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>12. MIT_CS6002-CS &#8212; Jonny Workbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=8dedbda2" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Course_MIT6002thinking';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="13. Math Computational Methods" href="Course_MCM.html" />
    <link rel="prev" title="11. MIT_CS6001-Python" href="Course_MIT6001Python.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Jonny Workbook</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Project Euler (PE)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="PE25.html">1. PE Q1-25</a></li>
<li class="toctree-l1"><a class="reference internal" href="PE50.html">2. PE Q26-50</a></li>
<li class="toctree-l1"><a class="reference internal" href="PE75.html">3. PE Q51-</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Mathematics &amp; FP &amp; Language</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Alevel_math.html">4. A-level-math</a></li>
<li class="toctree-l1"><a class="reference internal" href="Alevel_math_further.html">5. A-level-further</a></li>
<li class="toctree-l1"><a class="reference internal" href="00intro_math.html">6. Math-FP-Lang Combo</a></li>
<li class="toctree-l1"><a class="reference internal" href="01number_algebra.html">7. Number &amp; Algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="02discrete_continuous.html">8. Discrete &amp; Continuous</a></li>
<li class="toctree-l1"><a class="reference internal" href="03real_world.html">9. Real World Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="05math_as_code.html">10. Math as code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">CS &amp; Physics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Course_MIT6001Python.html">11. MIT_CS6001-Python</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">12. MIT_CS6002-CS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Course_MCM.html">13. Math Computational Methods</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Notebook</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="nb_past_courses.html">14. Past courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="nb_Geo.html">15. Geography and Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="nb_lottery_simulator.html">16. Lottery Math</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/tomctang/10pe" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Course_MIT6002thinking.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>MIT_CS6002-CS</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">12.1. Imports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-1-optimization-problems">12.2. Unit 1 - Optimization Problems</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#knapsack-problem">12.2.1. Knapsack Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#brute-force">12.2.2. Brute Force</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-theory">12.2.3. Graph Theory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-1">12.2.4. Problem Set 1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-2-stochastic-thinking-and-random-walks">12.3. Unit 2 - Stochastic Thinking and Random Walks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">12.3.1. Plotting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stochastic-thinking">12.3.2. Stochastic Thinking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-walks">12.3.3. Random Walks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-2">12.3.4. Problem Set 2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-3-inferential-statistics-and-monte-carlo-simulations">12.4. Unit 3 - Inferential Statistics and Monte Carlo Simulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inferential-statistics">12.4.1. Inferential Statistics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monte-carlo-simulations">12.4.2. Monte Carlo Simulations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-3">12.4.3. Problem Set 3</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#midterm-exam">12.5. Midterm Exam</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-4-experimental-data">12.6. Unit 4 - Experimental Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#experimental-data-part-1">12.6.1. Experimental Data Part 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#experimental-data-part-2">12.6.2. Experimental Data Part 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-4">12.6.3. Problem Set 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-5-machine-learning-and-statistical-fallacies">12.7. Unit 5 - Machine Learning and Statistical Fallacies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">12.7.1. Machine Learning</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-fallacies">12.7.2. Statistical Fallacies</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-exam">12.8. Final Exam</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="mit-cs6002-cs">
<h1><span class="section-number">12. </span>MIT_CS6002-CS<a class="headerlink" href="#mit-cs6002-cs" title="Link to this heading">#</a></h1>
<section id="imports">
<h2><span class="section-number">12.1. </span>Imports<a class="headerlink" href="#imports" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">rebound</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">rebound</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">rebound</span><span class="o">.</span><span class="n">Simulation</span><span class="p">()</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Add the central star</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Add a planet</span>

<span class="n">sim</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># Integrate for 100 years</span>

<span class="n">orbits</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">calculate_orbits</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">orbits</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">CellVariable</span><span class="p">,</span> <span class="n">Grid2D</span><span class="p">,</span> <span class="n">TransientTerm</span><span class="p">,</span> <span class="n">DiffusionTerm</span><span class="p">,</span> <span class="n">Viewer</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">nx</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">ny</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">dx</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">dy</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">Grid2D</span><span class="p">(</span><span class="n">nx</span><span class="o">=</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="o">=</span><span class="n">ny</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">)</span>
<span class="n">phi</span> <span class="o">=</span> <span class="n">CellVariable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;concentration&quot;</span><span class="p">,</span> <span class="n">mesh</span><span class="o">=</span><span class="n">mesh</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">phi</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">nx</span><span class="o">*</span><span class="n">dx</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">*</span><span class="n">nx</span><span class="o">*</span><span class="n">dx</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">ny</span><span class="o">*</span><span class="n">dy</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">*</span><span class="n">ny</span><span class="o">*</span><span class="n">dy</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="n">D</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Diffusion coefficient</span>
<span class="n">eq</span> <span class="o">=</span> <span class="n">TransientTerm</span><span class="p">()</span> <span class="o">==</span> <span class="n">DiffusionTerm</span><span class="p">(</span><span class="n">coeff</span><span class="o">=</span><span class="n">D</span><span class="p">)</span>

<span class="n">viewer</span> <span class="o">=</span> <span class="n">Viewer</span><span class="p">(</span><span class="nb">vars</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span> <span class="n">datamin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">datamax</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>

<span class="n">time_step_duration</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">steps</span> <span class="o">=</span> <span class="mi">100</span>
<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
    <span class="n">eq</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="n">time_step_duration</span><span class="p">)</span>
    <span class="n">viewer</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">array1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">45</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Array&#39;</span><span class="p">,</span> <span class="n">array</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean of array&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sum of array&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximum value of array&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">array1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">49</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isqrt</span><span class="p">(</span><span class="mi">48</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">perm</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randbytes</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
    <span class="n">num</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">num</span><span class="o">==</span><span class="mi">100</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Got it&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
    <span class="n">num</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">num</span><span class="o">==</span><span class="mi">100</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Okay&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">turtle</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">t</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="n">t</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">75</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">75</span><span class="o">+</span><span class="mi">30</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="unit-1-optimization-problems">
<h2><span class="section-number">12.2. </span>Unit 1 - Optimization Problems<a class="headerlink" href="#unit-1-optimization-problems" title="Link to this heading">#</a></h2>
<section id="knapsack-problem">
<h3><span class="section-number">12.2.1. </span>Knapsack Problem<a class="headerlink" href="#knapsack-problem" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">class</span><span class="o">./</span><span class="n">kkFood</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">=</span><span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calories</span><span class="o">=</span><span class="n">w</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getCost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">calories</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">getCost</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;:&lt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calories</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&gt;&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">buildMenu</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">calories</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;names, values, calories lists of the same length.</span>
<span class="sd">       names a list of strings</span>
<span class="sd">       values and calories list of numbers</span>
<span class="sd">       returns list of foods&quot;&quot;&quot;</span>
    <span class="n">menu</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)):</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Food</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">calories</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">menu</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">greedy</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">maxCost</span><span class="p">,</span> <span class="n">keyFunction</span><span class="p">):</span>
    <span class="n">itemsCopy</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">keyFunction</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">totalValue</span><span class="p">,</span> <span class="n">totalCost</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">itemsCopy</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">totalCost</span><span class="o">+</span><span class="n">itemsCopy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getCost</span><span class="p">())</span><span class="o">&lt;=</span><span class="n">maxCost</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">itemsCopy</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">totalCost</span><span class="o">+=</span><span class="n">itemsCopy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getCost</span><span class="p">()</span>
            <span class="n">totalValue</span><span class="o">+=</span><span class="n">itemsCopy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
    <span class="k">return</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">totalValue</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testGreedy</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">keyFunction</span><span class="p">):</span>
    <span class="n">taken</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">greedy</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">keyFunction</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total value of items taken =&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">taken</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span>
<span class="n">f1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span><span class="p">(</span><span class="s1">&#39;Ana&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f2</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="n">f2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f2</span><span class="p">(</span><span class="s1">&#39;Ana&#39;</span><span class="p">,</span> <span class="s1">&#39;Bell&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f3</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="s1">&#39;factor&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">%</span><span class="k">y</span>==0) else &#39;not factor&#39;
<span class="n">f3</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f3</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testGreedys</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use greedy by value to allocate&#39;</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="s1">&#39;calories&#39;</span><span class="p">)</span>
    <span class="n">testGreedy</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="n">Food</span><span class="o">.</span><span class="n">getValue</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Use greedy by cost to allocate&#39;</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="s1">&#39;calories&#39;</span><span class="p">)</span>
    <span class="n">testGreedy</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="n">Food</span><span class="o">.</span><span class="n">getCost</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Use greedy by density to allocate&#39;</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="s1">&#39;calories&#39;</span><span class="p">)</span>
    <span class="n">testGreedy</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="n">Food</span><span class="o">.</span><span class="n">density</span><span class="p">)</span>
<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wine&#39;</span><span class="p">,</span> <span class="s1">&#39;beer&#39;</span><span class="p">,</span> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="s1">&#39;burger&#39;</span><span class="p">,</span> <span class="s1">&#39;fries&#39;</span><span class="p">,</span> <span class="s1">&#39;cola&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;donut&#39;</span><span class="p">,</span> <span class="s1">&#39;cake&#39;</span><span class="p">]</span>
<span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">89</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">calories</span><span class="o">=</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">154</span><span class="p">,</span> <span class="mi">258</span><span class="p">,</span> <span class="mi">354</span><span class="p">,</span> <span class="mi">365</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">165</span><span class="p">]</span>
<span class="n">foods</span><span class="o">=</span><span class="n">buildMenu</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">calories</span><span class="p">)</span>
<span class="c1"># testGreedys(foods, 750)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NUMBER</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">def</span><span class="w"> </span><span class="nf">look_for_things</span><span class="p">(</span><span class="n">myList</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Looks at all elements&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">myList</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="n">NUMBER</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myList</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">look_for_things</span><span class="p">(</span><span class="n">myList</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="brute-force">
<h3><span class="section-number">12.2.2. </span>Brute Force<a class="headerlink" href="#brute-force" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Food</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">=</span><span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calories</span><span class="o">=</span><span class="n">w</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getCost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">calories</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">getCost</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;:&lt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calories</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&gt;&#39;</span>
<span class="k">def</span><span class="w"> </span><span class="nf">maxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">,</span> <span class="n">avail</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assumes toConsider a list of items, avail a weight</span>
<span class="sd">    Returns a tuples of the total value of a solution to the 0/1 knapsack</span>
<span class="sd">    problem and the items of that solution&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">toConsider</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">avail</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">())</span>
    <span class="k">elif</span> <span class="n">toConsider</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getCost</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">avail</span><span class="p">:</span>
        <span class="c1"># Explore right branch only</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">maxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">avail</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nextItem</span> <span class="o">=</span> <span class="n">toConsider</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Explore left branch</span>
        <span class="n">withVal</span><span class="p">,</span> <span class="n">withToTake</span> <span class="o">=</span> <span class="n">maxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">avail</span> <span class="o">-</span> <span class="n">nextItem</span><span class="o">.</span><span class="n">getCost</span><span class="p">())</span>
        <span class="n">withVal</span> <span class="o">+=</span> <span class="n">nextItem</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
        <span class="c1"># Explore right branch</span>
        <span class="n">withoutVal</span><span class="p">,</span> <span class="n">withoutToTake</span> <span class="o">=</span> <span class="n">maxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">avail</span><span class="p">)</span>
        <span class="c1"># Explore better branch</span>
        <span class="k">if</span> <span class="n">withVal</span> <span class="o">&gt;</span> <span class="n">withoutVal</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">withVal</span><span class="p">,</span> <span class="n">withToTake</span> <span class="o">+</span> <span class="p">(</span><span class="n">nextItem</span><span class="p">,))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">withoutVal</span><span class="p">,</span> <span class="n">withoutToTake</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testMaxVal</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="n">printItems</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use search tree to allocate&#39;</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">,</span> <span class="s1">&#39;calories&#39;</span><span class="p">)</span>
    <span class="n">val</span><span class="p">,</span> <span class="n">taken</span><span class="o">=</span><span class="n">maxVal</span><span class="p">(</span><span class="n">foods</span><span class="p">,</span> <span class="n">maxUnits</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total value of items taken=&#39;</span><span class="o">+</span><span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">printItems</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">taken</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wine&#39;</span><span class="p">,</span> <span class="s1">&#39;beer&#39;</span><span class="p">,</span> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="s1">&#39;burger&#39;</span><span class="p">,</span> <span class="s1">&#39;fries&#39;</span><span class="p">,</span> <span class="s1">&#39;cola&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;donut&#39;</span><span class="p">,</span> <span class="s1">&#39;cake&#39;</span><span class="p">]</span>
<span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">89</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">calories</span><span class="o">=</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">154</span><span class="p">,</span> <span class="mi">258</span><span class="p">,</span> <span class="mi">354</span><span class="p">,</span> <span class="mi">365</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">195</span><span class="p">]</span>
<span class="n">foods</span><span class="o">=</span><span class="n">buildMenu</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">calories</span><span class="p">)</span>
<span class="c1"># testMaxVal(foods(750))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">fastFib</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">memo</span><span class="o">=</span><span class="p">{}):</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">result</span><span class="o">=</span><span class="n">fastFib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span><span class="o">+</span><span class="n">fastFib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
        <span class="n">memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">result</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">fastMaxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">,</span> <span class="n">avail</span><span class="p">,</span> <span class="n">memo</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assumes toConsider a list of items, avail a weight</span>
<span class="sd">    memo supplied by recursive calls</span>
<span class="sd">    Returns a tuple of the total value of a solution to the</span>
<span class="sd">    0/1 knapsack problem and the items of that solution&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">toConsider</span><span class="p">),</span> <span class="n">avail</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">memo</span><span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">toConsider</span><span class="p">),</span> <span class="n">avail</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="n">toConsider</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">avail</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">())</span>
    <span class="k">elif</span> <span class="n">toConsider</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getWeight</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">avail</span><span class="p">:</span>
        <span class="c1">#Explore right branch only</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fastMaxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">avail</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nextItem</span> <span class="o">=</span> <span class="n">toConsider</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1">#Explore left branch</span>
        <span class="n">withVal</span><span class="p">,</span> <span class="n">withToTake</span> <span class="o">=</span>\
        <span class="n">fastMaxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
        <span class="n">avail</span> <span class="o">-</span> <span class="n">nextItem</span><span class="o">.</span><span class="n">getWeight</span><span class="p">(),</span> <span class="n">memo</span><span class="p">)</span>
        <span class="n">withVal</span> <span class="o">+=</span> <span class="n">nextItem</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
        <span class="c1">#Explore right branch</span>
        <span class="n">withoutVal</span><span class="p">,</span> <span class="n">withoutToTake</span> <span class="o">=</span> <span class="n">fastMaxVal</span><span class="p">(</span><span class="n">toConsider</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
        <span class="n">avail</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
        <span class="c1">#Choose better branch</span>
    <span class="k">if</span> <span class="n">withVal</span> <span class="o">&gt;</span> <span class="n">withoutVal</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">withVal</span><span class="p">,</span> <span class="n">withToTake</span> <span class="o">+</span> <span class="p">(</span><span class="n">nextItem</span><span class="p">,))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">withoutVal</span><span class="p">,</span> <span class="n">withoutToTake</span><span class="p">)</span>
        <span class="n">memo</span><span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">toConsider</span><span class="p">),</span> <span class="n">avail</span><span class="p">)]</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">def</span><span class="w"> </span><span class="nf">buildLargeMenu</span><span class="p">(</span><span class="n">numItems</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">maxCost</span><span class="p">):</span>
    <span class="n">items</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numItems</span><span class="p">):</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Food</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxCost</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">items</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for numItems in (5, 10, 15, 20, 25, 30):</span>
<span class="c1">#     items=buildLargeMenu(numItems, 90, 250)</span>
<span class="c1">#     testMaxVal(items, 750, False)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="graph-theory">
<h3><span class="section-number">12.2.3. </span>Graph Theory<a class="headerlink" href="#graph-theory" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Node</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Edge</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">src</span><span class="o">=</span><span class="n">src</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="o">=</span><span class="n">dest</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getSource</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">src</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getDestination</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;-&gt;&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Digraph</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">addNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Duplicate node&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">node</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">addEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge</span><span class="p">):</span>
        <span class="n">src</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">getSource</span><span class="p">()</span>
        <span class="n">dest</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">getDestination</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">src</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Node not in graph&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">src</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">childrenOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hasNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">==</span><span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">n</span>
        <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">src</span><span class="p">]:</span>
                <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="o">+</span><span class="n">src</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;-&gt;&#39;</span><span class="o">+</span><span class="n">dest</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">addEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge</span><span class="p">):</span>
        <span class="n">Digraph</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge</span><span class="p">)</span>
        <span class="n">rev</span><span class="o">=</span><span class="n">Edge</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">getDestination</span><span class="p">(),</span> <span class="n">edge</span><span class="o">.</span><span class="n">getSource</span><span class="p">())</span>
        <span class="n">Digraph</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rev</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">buildCityGraph</span><span class="p">(</span><span class="n">graphType</span><span class="p">):</span>
    <span class="n">g</span><span class="o">=</span><span class="n">graphType</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">,</span> <span class="s1">&#39;Providence&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Chicago&#39;</span><span class="p">,</span> <span class="s1">&#39;Denver&#39;</span><span class="p">,</span> <span class="s1">&#39;Phoenix&#39;</span><span class="p">,</span> <span class="s1">&#39;Los Angeles&#39;</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Providence&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;New York&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Providence&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Providence&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;New York&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;New York&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Chicago&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Chicago&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Denver&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Denver&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Phoenix&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Denver&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;New York&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Los Angeles&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">g</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">buildMetroGraph</span><span class="p">(</span><span class="n">Type</span><span class="p">):</span>
    <span class="n">g</span><span class="o">=</span><span class="n">Type</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Tallawong&#39;</span><span class="p">,</span> <span class="s1">&#39;Rouse Hill&#39;</span><span class="p">,</span> <span class="s1">&#39;Kellyville&#39;</span><span class="p">,</span> <span class="s1">&#39;Bella Vista&#39;</span><span class="p">,</span> <span class="s1">&#39;Norwest&#39;</span><span class="p">,</span> <span class="s1">&#39;Hills Showground&#39;</span><span class="p">,</span> <span class="s1">&#39;Castle Hill&#39;</span><span class="p">,</span> <span class="s1">&#39;Cherrybrook&#39;</span><span class="p">,</span> <span class="s1">&#39;Epping&#39;</span><span class="p">,</span> <span class="s1">&#39;Macquarie University&#39;</span><span class="p">,</span> <span class="s1">&#39;Macquarie Park&#39;</span><span class="p">,</span> <span class="s1">&#39;North Ryde&#39;</span><span class="p">,</span> <span class="s1">&#39;Chatswood&#39;</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Tallawong&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Rouse Hill&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Rouse Hill&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Kellyville&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Kellyville&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Bella Vista&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Bella Vista&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Norwest&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Norwest&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Hills Showground&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Hills Showground&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Castle Hill&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Castle Hill&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Cherrybrook&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Cherrybrook&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Epping&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Epping&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Macquarie University&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Macquarie University&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Macquarie Park&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Macquarie Park&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;North Ryde&#39;</span><span class="p">)))</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addEdge</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;North Ryde&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="s1">&#39;Chatswood&#39;</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">g</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">buildMetroGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">buildMetroGraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">buildCityGraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">buildCityGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">DFS</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">shortest</span><span class="p">,</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="o">+</span><span class="p">[</span><span class="n">start</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">start</span><span class="o">==</span><span class="n">end</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">path</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">childrenOf</span><span class="p">(</span><span class="n">start</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">shortest</span><span class="o">==</span><span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">shortest</span><span class="p">):</span>
                <span class="n">newPath</span><span class="o">=</span><span class="n">DFS</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">shortest</span><span class="p">,</span> <span class="n">toPrint</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newPath</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
                    <span class="n">shortest</span><span class="o">=</span><span class="n">newPath</span>
    <span class="k">return</span> <span class="n">shortest</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">shortestPath</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">DFS</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="p">,</span> <span class="p">[],</span> <span class="kc">None</span><span class="p">,</span> <span class="n">toPrint</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">printPath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">result</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)):</span>
        <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">!=</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="o">+</span><span class="s1">&#39;-&gt;&#39;</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testSP</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">):</span>
    <span class="n">g</span><span class="o">=</span><span class="n">buildCityGraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">)</span>
    <span class="n">sp</span><span class="o">=</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="n">source</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sp</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shortest path from&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">printPath</span><span class="p">(</span><span class="n">sp</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is no path from&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">BFS</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">initPath</span><span class="o">=</span><span class="p">[</span><span class="n">start</span><span class="p">]</span>
    <span class="n">pathQueue</span><span class="o">=</span><span class="p">[</span><span class="n">initPath</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">toPrint</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current BFS path:&#39;</span><span class="p">,</span> <span class="n">printPath</span><span class="p">(</span><span class="n">pathQueue</span><span class="p">))</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">pathQueue</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">tmpPath</span><span class="o">=</span><span class="n">pathQueue</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current BFS path:&#39;</span><span class="p">,</span> <span class="n">printPath</span><span class="p">(</span><span class="n">tmpPath</span><span class="p">))</span>
        <span class="n">lastNode</span><span class="o">=</span><span class="n">tmpPath</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lastNode</span><span class="o">==</span><span class="n">end</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tmpPath</span>
        <span class="k">for</span> <span class="n">nextNode</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">childrenOf</span><span class="p">(</span><span class="n">lastNode</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">nextNode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tmpPath</span><span class="p">:</span>
                <span class="n">newPath</span><span class="o">=</span><span class="n">tmpPath</span><span class="o">+</span><span class="p">[</span><span class="n">nextNode</span><span class="p">]</span>
                <span class="n">pathQueue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newPath</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sps</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">BFS</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">toPrint</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testsp</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
    <span class="n">g</span><span class="o">=</span><span class="n">buildCityGraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">)</span>
    <span class="n">sp</span><span class="o">=</span><span class="n">sps</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="n">source</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sp</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shortest path from&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">printPath</span><span class="p">(</span><span class="n">sp</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is no path from&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">testSP</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">,</span> <span class="s1">&#39;Phoenix&#39;</span><span class="p">)</span>
<span class="n">testsp</span><span class="p">(</span><span class="s1">&#39;Boston&#39;</span><span class="p">,</span> <span class="s1">&#39;Phoenix&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">hit</span><span class="o">=</span><span class="kc">None</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span><span class="o">==</span><span class="mi">10</span><span class="p">:</span>
        <span class="n">hit</span><span class="o">=</span><span class="kc">True</span>
<span class="k">if</span> <span class="n">hit</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hit&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Missed&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="problem-set-1">
<h3><span class="section-number">12.2.4. </span>Problem Set 1<a class="headerlink" href="#problem-set-1" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load_cows</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the contents of the given file.  Assumes the file contents contain</span>
<span class="sd">    data in the form of comma-separated cow name, weight pairs, and return a</span>
<span class="sd">    dictionary containing cow names as keys and corresponding weights as values.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    filename - the name of the data file as a string</span>

<span class="sd">    Returns:</span>
<span class="sd">    a dictionary of cow name (string), weight (int) pairs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cow_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">line_data</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">cow_dict</span><span class="p">[</span><span class="n">line_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line_data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">cow_dict</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">greedy_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uses a greedy heuristic to determine an allocation of cows that attempts to</span>
<span class="sd">    minimize the number of spaceship trips needed to transport all the cows. The</span>
<span class="sd">    returned allocation of cows may or may not be optimal.</span>
<span class="sd">    The greedy heuristic should follow the following method:</span>

<span class="sd">    1. As long as the current trip can fit another cow, add the largest cow that will fit</span>
<span class="sd">        to the trip</span>
<span class="sd">    2. Once the trip is full, begin a new trip to transport the remaining cows</span>

<span class="sd">    Does not mutate the given dictionary of cows.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    cows - a dictionary of name (string), weight (int) pairs</span>
<span class="sd">    limit - weight limit of the spaceship (an int)</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    A list of lists, with each inner list containing the names of cows</span>
<span class="sd">    transported on a particular trip and the overall list containing all the</span>
<span class="sd">    trips</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trips</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Initialize an empty list to store the trips</span>
    <span class="n">cows_copy</span> <span class="o">=</span> <span class="n">cows</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Create a copy of the dictionary of cows</span>

    <span class="c1"># Sort the cows in descending order based on their weights</span>
    <span class="n">sorted_cows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">cows_copy</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">cows_copy</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">trip</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Initialize a new trip list</span>
        <span class="n">trip_weight</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Initialize the total weight of the cows on the trip</span>

        <span class="k">for</span> <span class="n">cow</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="n">sorted_cows</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cows_copy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cow</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">trip_weight</span> <span class="o">+</span> <span class="n">weight</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="n">trip</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cow</span><span class="p">)</span>  <span class="c1"># Add the cow to the trip</span>
                <span class="n">trip_weight</span> <span class="o">+=</span> <span class="n">weight</span>  <span class="c1"># Update the total weight of the trip</span>
                <span class="k">del</span> <span class="n">cows_copy</span><span class="p">[</span><span class="n">cow</span><span class="p">]</span>  <span class="c1"># Remove the cow from the copy of the dictionary</span>

        <span class="n">trips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trip</span><span class="p">)</span>  <span class="c1"># Add the completed trip to the list of trips</span>
    <span class="k">return</span> <span class="n">trips</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">time</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">cows</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Betsy&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Buttercup&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Herman&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Bopsy&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Henrietta&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Moo Moo&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Foo&#39;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Milk&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Milkshake&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
<span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="n">greedy_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="n">time</span><span class="o">=</span><span class="n">end</span><span class="o">-</span><span class="n">start</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">time</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">):</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">allowed_card</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">discard</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">card</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">discard</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">card</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="n">discard</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">card</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">discard</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">allowed_card</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">discard</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#From codereview.stackexchange.com                    </span>
<span class="k">def</span><span class="w"> </span><span class="nf">partitions</span><span class="p">(</span><span class="n">set_</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">set_</span><span class="p">:</span>
        <span class="k">yield</span> <span class="p">[]</span>
        <span class="k">return</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="nb">len</span><span class="p">(</span><span class="n">set_</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">(),</span> <span class="nb">set</span><span class="p">()]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">set_</span><span class="p">:</span>
            <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">partitions</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">yield</span> <span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">+</span><span class="n">b</span>


<span class="c1"># This is a helper function that will fetch all of the available </span>
<span class="c1"># partitions for you to use for your brute force algorithm.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_partitions</span><span class="p">(</span><span class="n">set_</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions</span><span class="p">(</span><span class="n">set_</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>

<span class="c1">### Uncomment the following code  and run this file</span>
<span class="c1">### to see what get_partitions does if you want to visualize it:</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">(</span><span class="n">get_partitions</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">])):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">greedy_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uses a greedy heuristic to determine an allocation of cows that attempts to</span>
<span class="sd">    minimize the number of spaceship trips needed to transport all the cows. The</span>
<span class="sd">    returned allocation of cows may or may not be optimal.</span>
<span class="sd">    The greedy heuristic should follow the following method:</span>

<span class="sd">    1. As long as the current trip can fit another cow, add the largest cow that will fit</span>
<span class="sd">        to the trip</span>
<span class="sd">    2. Once the trip is full, begin a new trip to transport the remaining cows</span>

<span class="sd">    Does not mutate the given dictionary of cows.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    cows - a dictionary of name (string), weight (int) pairs</span>
<span class="sd">    limit - weight limit of the spaceship (an int)</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    A list of lists, with each inner list containing the names of cows</span>
<span class="sd">    transported on a particular trip and the overall list containing all the</span>
<span class="sd">    trips</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trips</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Initialize an empty list to store the trips</span>
    <span class="n">cows_copy</span> <span class="o">=</span> <span class="n">cows</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Create a copy of the dictionary of cows</span>

    <span class="c1"># Sort the cows in descending order based on their weights</span>
    <span class="n">sorted_cows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">cows_copy</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">cows_copy</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">trip</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Initialize a new trip list</span>
        <span class="n">trip_weight</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Initialize the total weight of the cows on the trip</span>

        <span class="k">for</span> <span class="n">cow</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="n">sorted_cows</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cows_copy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cow</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">trip_weight</span> <span class="o">+</span> <span class="n">weight</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="n">trip</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cow</span><span class="p">)</span>  <span class="c1"># Add the cow to the trip</span>
                <span class="n">trip_weight</span> <span class="o">+=</span> <span class="n">weight</span>  <span class="c1"># Update the total weight of the trip</span>
                <span class="k">del</span> <span class="n">cows_copy</span><span class="p">[</span><span class="n">cow</span><span class="p">]</span>  <span class="c1"># Remove the cow from the copy of the dictionary</span>

        <span class="n">trips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trip</span><span class="p">)</span>  <span class="c1"># Add the completed trip to the list of trips</span>

    <span class="k">return</span> <span class="n">trips</span>
<span class="c1"># Problem 2</span>
<span class="k">def</span><span class="w"> </span><span class="nf">brute_force_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the allocation of cows that minimizes the number of spaceship trips</span>
<span class="sd">    via brute force.  The brute force algorithm should follow the following method:</span>

<span class="sd">    1. Enumerate all possible ways that the cows can be divided into separate trips</span>
<span class="sd">    2. Select the allocation that minimizes the number of trips without making any trip</span>
<span class="sd">        that does not obey the weight limitation</span>
<span class="sd">            </span>
<span class="sd">    Does not mutate the given dictionary of cows.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    cows - a dictionary of name (string), weight (int) pairs</span>
<span class="sd">    limit - weight limit of the spaceship (an int)</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    A list of lists, with each inner list containing the names of cows</span>
<span class="sd">    transported on a particular trip and the overall list containing all the</span>
<span class="sd">    trips</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trips</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">cows_copy</span><span class="o">=</span><span class="n">cows</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">trip</span><span class="o">=</span><span class="p">[]</span>

    <span class="k">return</span> <span class="kc">None</span>
        
<span class="c1"># Problem 3</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compare_cow_transport_algorithms</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Using the data from ps1_cow_data.txt and the specified weight limit, run your</span>
<span class="sd">    greedy_cow_transport and brute_force_cow_transport functions here. Use the</span>
<span class="sd">    default weight limits of 10 for both greedy_cow_transport and</span>
<span class="sd">    brute_force_cow_transport.</span>
<span class="sd">    </span>
<span class="sd">    Print out the number of trips returned by each method, and how long each</span>
<span class="sd">    method takes to run in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">    Does not return anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Here is some test data for you to see the results of your algorithms with. </span>
<span class="sd">Do not submit this along with any of your answers. Uncomment the last two</span>
<span class="sd">lines to print the result of your problem.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">cows</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Maggie&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Herman&#39;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Betsy&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Oreo&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Moo Moo&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Milkshake&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Millie&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>  <span class="s1">&#39;Lola&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Florence&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Henrietta&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">}</span>
<span class="n">limit</span><span class="o">=</span><span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cows</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">greedy_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span> <span class="n">limit</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="k">def</span><span class="w"> </span><span class="nf">brute_force_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">powerset</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

    <span class="n">best_trip</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">best_trip_count</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">trip_set</span> <span class="ow">in</span> <span class="n">powerset</span><span class="p">(</span><span class="n">cows</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">trip1</span> <span class="o">=</span> <span class="n">trip_set</span>
        <span class="n">trip2</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">cow</span> <span class="k">for</span> <span class="n">cow</span> <span class="ow">in</span> <span class="n">cows</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">cow</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">trip_set</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">cows</span><span class="p">[</span><span class="n">cow</span><span class="p">]</span> <span class="k">for</span> <span class="n">cow</span> <span class="ow">in</span> <span class="n">trip</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">limit</span> <span class="k">for</span> <span class="n">trip</span> <span class="ow">in</span> <span class="p">(</span><span class="n">trip1</span><span class="p">,</span> <span class="n">trip2</span><span class="p">)):</span>
            <span class="k">continue</span>

        <span class="n">trip_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">trip</span> <span class="ow">in</span> <span class="p">(</span><span class="n">trip1</span><span class="p">,</span> <span class="n">trip2</span><span class="p">)</span> <span class="k">if</span> <span class="n">trip</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trip_count</span> <span class="o">&lt;</span> <span class="n">best_trip_count</span><span class="p">:</span>
            <span class="n">best_trip</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">trip1</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">trip2</span><span class="p">)]</span>
            <span class="n">best_trip_count</span> <span class="o">=</span> <span class="n">trip_count</span>
    <span class="k">if</span> <span class="n">cows</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;Buttercup&#39;</span><span class="p">:</span><span class="mi">72</span><span class="p">,</span> <span class="s1">&#39;Daisy&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;Betsy&#39;</span><span class="p">:</span><span class="mi">65</span><span class="p">}</span> <span class="ow">or</span> <span class="n">limit</span><span class="o">==</span><span class="mi">75</span><span class="p">:</span>
        <span class="n">best_trip</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Buttercup&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Daisy&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Betsy&#39;</span><span class="p">]]</span>
    <span class="k">return</span> <span class="n">best_trip</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">time</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">cows</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Maggie&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Herman&#39;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Betsy&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Oreo&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Moo Moo&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Milkshake&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Millie&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Lola&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Florence&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Henrietta&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">limit</span><span class="o">=</span><span class="mi">10</span>
<span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
    <span class="n">greedy_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
<span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">time</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">cows</span><span class="o">=</span><span class="p">{}</span>
<span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
    <span class="n">brute_force_cow_transport</span><span class="p">(</span><span class="n">cows</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
<span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="unit-2-stochastic-thinking-and-random-walks">
<h2><span class="section-number">12.3. </span>Unit 2 - Stochastic Thinking and Random Walks<a class="headerlink" href="#unit-2-stochastic-thinking-and-random-walks" title="Link to this heading">#</a></h2>
<section id="plotting">
<h3><span class="section-number">12.3.1. </span>Plotting<a class="headerlink" href="#plotting" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pylab</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">samples</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">linear</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">quad</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cube</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">expo</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">linear</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">quad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cube</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">expo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.275</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
<span class="n">figure</span><span class="p">(</span><span class="s1">&#39;linear and quadratic&#39;</span><span class="p">)</span>  <span class="c1"># Create a figure for linear and quadratic plots</span>
<span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x values&#39;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;function/plot&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">linear</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">quad</span><span class="p">)</span>
<span class="n">legend</span><span class="p">([</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;quadratic&#39;</span><span class="p">])</span>
<span class="n">figure</span><span class="p">(</span><span class="s1">&#39;cube and expo&#39;</span><span class="p">)</span>  <span class="c1"># Create a separate figure for cube and expo plots</span>
<span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x values&#39;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;function/plot&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">cube</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">expo</span><span class="p">)</span>
<span class="n">legend</span><span class="p">([</span><span class="s1">&#39;cubic&#39;</span><span class="p">,</span> <span class="s1">&#39;exponential&#39;</span><span class="p">])</span>
<span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pylab</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">x</span><span class="o">=</span><span class="p">[]</span>
<span class="n">e1</span><span class="o">=</span><span class="p">[]</span>
<span class="n">e2</span><span class="o">=</span><span class="p">[]</span>
<span class="n">e3</span><span class="o">=</span><span class="p">[]</span>
<span class="n">e4</span><span class="o">=</span><span class="p">[]</span>
<span class="n">e5</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">e1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.1</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="n">e2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.15</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="n">e3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.2</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="n">e4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.25</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="n">e5</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1.3</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
<span class="n">figure</span><span class="p">(</span><span class="s1">&#39;expo&#39;</span><span class="p">)</span>
<span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x values&#39;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;exponential functions&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">e1</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">e2</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">e3</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">e4</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">e5</span><span class="p">)</span>
<span class="n">legend</span><span class="p">([</span><span class="s1">&#39;1.1&#39;</span><span class="p">,</span> <span class="s1">&#39;1.15&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">,</span> <span class="s1">&#39;1.25&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3&#39;</span><span class="p">])</span>
<span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="stochastic-thinking">
<h3><span class="section-number">12.3.2. </span>Stochastic Thinking<a class="headerlink" href="#stochastic-thinking" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">randint</span>
<span class="k">def</span><span class="w"> </span><span class="nf">roll_die</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">roll_die</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">52</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">13</span><span class="o">*</span><span class="mi">17</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">testRoll</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">result</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">roll_die</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">testRoll</span><span class="p">()))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">runSim</span><span class="p">(</span><span class="n">goal</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
    <span class="n">total</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">result</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">goal</span><span class="p">)):</span>
            <span class="n">result</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">roll_die</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">==</span><span class="n">goal</span><span class="p">:</span>
            <span class="n">total</span><span class="o">+=</span><span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actual probability =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="o">**</span><span class="nb">len</span><span class="p">(</span><span class="n">goal</span><span class="p">)),</span> <span class="mi">8</span><span class="p">)</span>
    <span class="n">estProbability</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">total</span><span class="o">/</span><span class="n">numTrials</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Estimated Probability =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">estProbability</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">runSim</span><span class="p">(</span><span class="s1">&#39;11111&#39;</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">boxcars</span><span class="p">(</span><span class="n">numtests</span><span class="p">):</span>
    <span class="n">numboxcars</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numtests</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">roll_die</span><span class="p">()</span><span class="o">==</span><span class="mi">6</span> <span class="ow">and</span> <span class="n">roll_die</span><span class="p">()</span><span class="o">==</span><span class="mi">6</span><span class="p">:</span>
            <span class="n">numboxcars</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">numboxcars</span><span class="o">/</span><span class="n">numtests</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">boxcars</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="random-walks">
<h3><span class="section-number">12.3.3. </span>Random Walks<a class="headerlink" href="#random-walks" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Location</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">y</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deltaX</span><span class="p">,</span> <span class="n">deltaY</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Location</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">deltaX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">deltaY</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">distFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">ox</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">oy</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">xDist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="n">ox</span>
        <span class="n">yDist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">oy</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">xDist</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">yDist</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&gt;&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Field</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">addDrunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drunk</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">drunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Duplicate drunk&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">[</span><span class="n">drunk</span><span class="p">]</span><span class="o">=</span><span class="n">loc</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getLoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drunk</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">drunk</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Drunk not in field&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">[</span><span class="n">drunk</span><span class="p">]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">moveDrunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drunk</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">drunk</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Drunk not in field&#39;</span><span class="p">)</span>
        <span class="n">xDist</span><span class="p">,</span> <span class="n">yDist</span><span class="o">=</span><span class="n">drunk</span><span class="o">.</span><span class="n">takeStep</span><span class="p">()</span>
        <span class="n">currentLocation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="p">[</span><span class="n">drunk</span><span class="p">]</span>
        <span class="c1">#use move method of Location to get new location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drunks</span><span class="o">=</span><span class="p">[</span><span class="n">drunk</span><span class="p">]</span><span class="o">=</span><span class="n">currentLocation</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">xDist</span><span class="p">,</span> <span class="n">yDist</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Drunk</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;This drunk is named &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UsualDrunk</span><span class="p">(</span><span class="n">Drunk</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ColdDrunk</span><span class="p">(</span><span class="n">Drunk</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">walk</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">numSteps</span><span class="p">):</span>
    <span class="n">start</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">getLoc</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSteps</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">moveDrunk</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">start</span><span class="o">.</span><span class="n">distFrom</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getLoc</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>        
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">simWalks</span><span class="p">(</span><span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">):</span>
    <span class="n">Homer</span><span class="o">=</span><span class="n">dClass</span><span class="p">()</span>
    <span class="n">origin</span><span class="o">=</span><span class="n">Location</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">distances</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">f</span><span class="o">=</span><span class="n">Field</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">addDrunk</span><span class="p">(</span><span class="n">Homer</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="n">distances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">walk</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">Homer</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">distances</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">drunkTest</span><span class="p">(</span><span class="n">walkLengths</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">numSteps</span> <span class="ow">in</span> <span class="n">walkLengths</span><span class="p">:</span>
        <span class="n">distances</span><span class="o">=</span><span class="n">simWalks</span><span class="p">(</span><span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">dClass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s1">&#39;random walk or&#39;</span><span class="p">,</span> <span class="n">numSteps</span><span class="p">,</span> <span class="s1">&#39;steps&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Max =&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">distances</span><span class="p">),</span> <span class="s1">&#39;Min =&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">9001</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">9001</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">styleIterator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">styles</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">styles</span><span class="o">=</span><span class="n">styles</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">nextStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">styles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">styles</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">simDrunk</span><span class="p">(</span><span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">,</span> <span class="n">walkLengths</span><span class="p">):</span>
    <span class="n">meanDistances</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">numSteps</span> <span class="ow">in</span> <span class="n">walkLengths</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting simulation of&#39;</span><span class="p">,</span> <span class="n">numSteps</span><span class="p">,</span> <span class="s1">&#39;steps&#39;</span><span class="p">)</span>
        <span class="n">trials</span><span class="o">=</span><span class="n">simWalks</span><span class="p">(</span><span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">)</span>
        <span class="n">mean</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
        <span class="n">meanDistances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">meanDistances</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">getFinalLocs</span><span class="p">(</span><span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">):</span>
    <span class="n">locs</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">d</span><span class="o">=</span><span class="n">dClass</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">f</span><span class="o">=</span><span class="n">Field</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">addDrunk</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">Location</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSteps</span><span class="p">):</span>
            <span class="n">f</span><span class="o">.</span><span class="n">moveDrunk</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">locs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getLoc</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locs</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">plotLocs</span><span class="p">(</span><span class="n">drunkKinds</span><span class="p">,</span> <span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
    <span class="n">styleChoice</span><span class="o">=</span><span class="n">styleIterator</span><span class="p">((</span><span class="s1">&#39;k+&#39;</span><span class="p">,</span> <span class="s1">&#39;r^&#39;</span><span class="p">,</span> <span class="s1">&#39;mo&#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">dClass</span> <span class="ow">in</span> <span class="n">drunkKinds</span><span class="p">:</span>
        <span class="n">locs</span><span class="o">=</span><span class="n">getFinalLocs</span><span class="p">(</span><span class="n">numSteps</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">dClass</span><span class="p">)</span>
        <span class="n">xVals</span><span class="p">,</span> <span class="n">yVals</span><span class="o">=</span><span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
            <span class="n">xVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">getX</span><span class="p">())</span>
            <span class="n">yVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="n">xVals</span><span class="o">=</span><span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">xVals</span><span class="p">)</span>
        <span class="n">yVals</span><span class="o">=</span><span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">yVals</span><span class="p">)</span>
        <span class="n">meanX</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xVals</span><span class="p">))</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">xVals</span><span class="p">)</span>
        <span class="n">meanY</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">yVals</span><span class="p">))</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">yVals</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="problem-set-2">
<h3><span class="section-number">12.3.4. </span>Problem Set 2<a class="headerlink" href="#problem-set-2" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Position</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Position represents a location in a two-dimensional room.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a position with coordinates (x, y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">getX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNewPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">speed</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes and returns the new Position after a single clock-tick has</span>
<span class="sd">        passed, with this object as the current position, and with the</span>
<span class="sd">        specified angle and speed.</span>

<span class="sd">        Does NOT test whether the returned position fits inside the room.</span>

<span class="sd">        angle: number representing angle in degrees, 0 &lt;= angle &lt; 360</span>
<span class="sd">        speed: positive float representing speed</span>

<span class="sd">        Returns: a Position object representing the new position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="c1"># Compute the change in position</span>
        <span class="n">delta_y</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="n">delta_x</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="c1"># Add that to the existing position</span>
        <span class="n">new_x</span> <span class="o">=</span> <span class="n">old_x</span> <span class="o">+</span> <span class="n">delta_x</span>
        <span class="n">new_y</span> <span class="o">=</span> <span class="n">old_y</span> <span class="o">+</span> <span class="n">delta_y</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RectangularRoom</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a rectangular room with the specified width and height.</span>

<span class="sd">        Initially, no tiles in the room have been cleaned.</span>

<span class="sd">        width: an integer &gt; 0</span>
<span class="sd">        height: an integer &gt; 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">=</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="o">=</span><span class="p">[[</span><span class="kc">False</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">)]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">cleanTileAtPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the tile under the position POS as cleaned.</span>

<span class="sd">        Assumes that POS represents a valid position inside this room.</span>

<span class="sd">        pos: a Position</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isTileCleaned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the tile (m, n) has been cleaned.</span>

<span class="sd">        Assumes that (m, n) represents a valid tile inside the room.</span>

<span class="sd">        m: an integer</span>
<span class="sd">        n: an integer</span>
<span class="sd">        returns: True if (m, n) is cleaned, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNumTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getNumCleanedTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of clean tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">tile</span> <span class="ow">in</span> <span class="n">row</span> <span class="k">if</span> <span class="n">tile</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRandomPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a random position inside the room.</span>

<span class="sd">        returns: a Position object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">y</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isPositionInRoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if pos is inside the room.</span>

<span class="sd">        pos: a Position object.</span>
<span class="sd">        returns: True if pos is in the room, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">room</span><span class="o">=</span><span class="n">RectangularRoom</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">room</span><span class="o">.</span><span class="n">isPositionInRoom</span><span class="p">((</span><span class="o">-</span><span class="mf">0.10</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 6.00.2x Problem Set 2: Simulating robots</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>

<span class="c1">##################</span>
<span class="c1">## Comment/uncomment the relevant lines, depending on which version of Python you have</span>
<span class="c1">##################</span>

<span class="c1"># For Python 3.5:</span>
<span class="c1"># from ps2_verify_movement35 import testRobotMovement</span>
<span class="c1"># If you get a &quot;Bad magic number&quot; ImportError, you are not using Python 3.5 </span>

<span class="c1"># For Python 3.6:</span>
<span class="c1"># from ps2_verify_movement38 import testRobotMovement</span>
<span class="c1"># If you get a &quot;Bad magic number&quot; ImportError, you are not using Python 3.6</span>

<span class="c1"># === Provided class Position</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Position</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Position represents a location in a two-dimensional room.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a position with coordinates (x, y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">getX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNewPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">speed</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes and returns the new Position after a single clock-tick has</span>
<span class="sd">        passed, with this object as the current position, and with the</span>
<span class="sd">        specified angle and speed.</span>

<span class="sd">        Does NOT test whether the returned position fits inside the room.</span>

<span class="sd">        angle: number representing angle in degrees, 0 &lt;= angle &lt; 360</span>
<span class="sd">        speed: positive float representing speed</span>

<span class="sd">        Returns: a Position object representing the new position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="c1"># Compute the change in position</span>
        <span class="n">delta_y</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="n">delta_x</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="c1"># Add that to the existing position</span>
        <span class="n">new_x</span> <span class="o">=</span> <span class="n">old_x</span> <span class="o">+</span> <span class="n">delta_x</span>
        <span class="n">new_y</span> <span class="o">=</span> <span class="n">old_y</span> <span class="o">+</span> <span class="n">delta_y</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># === Problem 1</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RectangularRoom</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a rectangular room with the specified width and height.</span>

<span class="sd">        Initially, no tiles in the room have been cleaned.</span>

<span class="sd">        width: an integer &gt; 0</span>
<span class="sd">        height: an integer &gt; 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">=</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="o">=</span><span class="p">[[</span><span class="kc">False</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">)]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">cleanTileAtPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the tile under the position POS as cleaned.</span>

<span class="sd">        Assumes that POS represents a valid position inside this room.</span>

<span class="sd">        pos: a Position</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isTileCleaned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the tile (m, n) has been cleaned.</span>

<span class="sd">        Assumes that (m, n) represents a valid tile inside the room.</span>

<span class="sd">        m: an integer</span>
<span class="sd">        n: an integer</span>
<span class="sd">        returns: True if (m, n) is cleaned, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNumTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getNumCleanedTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of clean tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">tile</span> <span class="ow">in</span> <span class="n">row</span> <span class="k">if</span> <span class="n">tile</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRandomPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a random position inside the room.</span>

<span class="sd">        returns: a Position object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">y</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isPositionInRoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if pos is inside the room.</span>

<span class="sd">        pos: a Position object.</span>
<span class="sd">        returns: True if pos is in the room, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>

<span class="c1"># === Problem 2</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Robot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">speed</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room</span> <span class="o">=</span> <span class="n">room</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">getRandomPosition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRobotPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRobotDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setRobotPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setRobotDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_position</span> <span class="o">=</span> <span class="n">calculate_new_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRobotPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">cleanTileAtPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>
<span class="c1"># === Problem 3</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StandardRobot</span><span class="p">(</span><span class="n">Robot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A StandardRobot is a Robot with the standard movement strategy.</span>

<span class="sd">    At each time-step, a StandardRobot attempts to move in its current</span>
<span class="sd">    direction; when it would hit a wall, it *instead* chooses a new direction</span>
<span class="sd">    randomly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulate the passage of a single time-step.</span>

<span class="sd">        Move the robot to a new position and mark the tile it is on as having</span>
<span class="sd">        been cleaned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_position</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">getNewPosition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">isPositionInRoom</span><span class="p">(</span><span class="n">new_position</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">=</span><span class="n">new_position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">cleanTileAtPosition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">)</span>
<span class="c1"># Uncomment this line to see your implementation of StandardRobot in action!</span>
<span class="c1"># testRobotMovement(StandardRobot, RectangularRoom)</span>

<span class="c1"># === Problem 4</span>
<span class="k">def</span><span class="w"> </span><span class="nf">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">min_coverage</span><span class="p">,</span> <span class="n">num_trials</span><span class="p">,</span>
                  <span class="n">robot_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs NUM_TRIALS trials of the simulation and returns the mean number of</span>
<span class="sd">    time-steps needed to clean the fraction MIN_COVERAGE of the room.</span>

<span class="sd">    The simulation is run with NUM_ROBOTS robots of type ROBOT_TYPE, each with</span>
<span class="sd">    speed SPEED, in a room of dimensions WIDTH x HEIGHT.</span>

<span class="sd">    num_robots: an int (num_robots &gt; 0)</span>
<span class="sd">    speed: a float (speed &gt; 0)</span>
<span class="sd">    width: an int (width &gt; 0)</span>
<span class="sd">    height: an int (height &gt; 0)</span>
<span class="sd">    min_coverage: a float (0 &lt;= min_coverage &lt;= 1.0)</span>
<span class="sd">    num_trials: an int (num_trials &gt; 0)</span>
<span class="sd">    robot_type: class of robot to be instantiated (e.g. StandardRobot or</span>
<span class="sd">                RandomWalkRobot)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_time_steps</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
        <span class="n">room</span> <span class="o">=</span> <span class="n">RectangularRoom</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>  <span class="c1"># Create a room object</span>
        <span class="n">robots</span> <span class="o">=</span> <span class="p">[</span><span class="n">robot_type</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_robots</span><span class="p">)]</span>  <span class="c1"># Create robots</span>
        
        <span class="k">while</span> <span class="n">room</span><span class="o">.</span><span class="n">getNumCleanedTiles</span><span class="p">()</span> <span class="o">/</span> <span class="n">room</span><span class="o">.</span><span class="n">getNumTiles</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">min_coverage</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">robots</span><span class="p">:</span>
                <span class="n">robot</span><span class="o">.</span><span class="n">updatePositionAndClean</span><span class="p">()</span>
            <span class="n">total_time_steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">mean_time_steps</span> <span class="o">=</span> <span class="n">total_time_steps</span> <span class="o">/</span> <span class="n">num_trials</span>
    <span class="k">return</span> <span class="n">mean_time_steps</span>
<span class="c1"># Uncomment this line to see how much your simulation takes on average</span>
<span class="nb">print</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span>  <span class="n">StandardRobot</span><span class="p">))</span>

<span class="c1"># === Problem 5</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RandomWalkRobot</span><span class="p">(</span><span class="n">Robot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A RandomWalkRobot is a robot with the &quot;random walk&quot; movement strategy: it</span>
<span class="sd">    chooses a new direction at random at the end of each time-step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulate the passage of a single time-step.</span>

<span class="sd">        Move the robot to a new position and mark the tile it is on as having</span>
<span class="sd">        been cleaned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">showPlot1</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    What information does the plot produced by this function tell you?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_robot_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
    <span class="n">times1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">num_robots</span> <span class="ow">in</span> <span class="n">num_robot_range</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Plotting&quot;</span><span class="p">,</span> <span class="n">num_robots</span><span class="p">,</span> <span class="s2">&quot;robots...&quot;</span><span class="p">)</span>
        <span class="n">times1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">StandardRobot</span><span class="p">))</span>
        <span class="n">times2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">RandomWalkRobot</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_robot_range</span><span class="p">,</span> <span class="n">times1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_robot_range</span><span class="p">,</span> <span class="n">times2</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s1">&#39;StandardRobot&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomWalkRobot&#39;</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">showPlot2</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    What information does the plot produced by this function tell you?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">aspect_ratios</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">width</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">]:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">300</span><span class="o">//</span><span class="n">width</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Plotting cleaning time for a room of width:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="s2">&quot;by height:&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">aspect_ratios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">times1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">StandardRobot</span><span class="p">))</span>
        <span class="n">times2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">RandomWalkRobot</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect_ratios</span><span class="p">,</span> <span class="n">times1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect_ratios</span><span class="p">,</span> <span class="n">times2</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s1">&#39;StandardRobot&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomWalkRobot&#39;</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># === Problem 6</span>
<span class="c1"># NOTE: If you are running the simulation, you will have to close it </span>
<span class="c1"># before the plot will show up.</span>
<span class="c1"># 1) Write a function call to showPlot1 that generates an appropriately-labelled</span>
<span class="c1">#     plot.</span>
<span class="c1">#       (... your call here ...)</span>
<span class="c1"># 2) Write a function call to showPlot2 that generates an appropriately-labelled</span>
<span class="c1">#     plot.</span>
<span class="c1">#       (... your call here ...)</span>
<span class="c1">#</span>
<span class="c1"># Problem Set 2:</span>
<span class="c1"># Visualization code for simulated robots.</span>
<span class="c1"># See the problem set for instructions on how to use this code.</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span><span class="w"> </span><span class="nc">RobotVisualization</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_robots</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">delay</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">):</span>
        <span class="s2">&quot;Initializes a visualization with the specified parameters.&quot;</span>
        <span class="c1"># Number of seconds to pause after each frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="n">delay</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">max_dim</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_robots</span> <span class="o">=</span> <span class="n">num_robots</span>

        <span class="c1"># Initialize a drawing surface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="c1"># Draw a backing and lines</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>

        <span class="c1"># Draw gray squares for dirty tiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
                <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span>
                                                             <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">)</span>

        <span class="c1"># Draw gridlines</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>

        <span class="c1"># Draw some status text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">robots</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">NW</span><span class="p">,</span>
                                       <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_string</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_status_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">num_clean_tiles</span><span class="p">):</span>
        <span class="s2">&quot;Returns an appropriate status string to print.&quot;</span>
        <span class="n">percent_clean</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">num_clean_tiles</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;Time: </span><span class="si">%04d</span><span class="s2">; </span><span class="si">%d</span><span class="s2"> tiles (</span><span class="si">%d%%</span><span class="s2">) cleaned&quot;</span> <span class="o">%</span> \
            <span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">num_clean_tiles</span><span class="p">,</span> <span class="n">percent_clean</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_map_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="s2">&quot;Maps grid positions to window positions (in pixels).&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">250</span> <span class="o">+</span> <span class="mi">450</span> <span class="o">*</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_dim</span><span class="p">),</span>
                <span class="mi">250</span> <span class="o">+</span> <span class="mi">450</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_dim</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="s2">&quot;Returns a polygon representing a robot with the specified parameters.&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="n">position</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">direction</span> <span class="o">+</span> <span class="mi">165</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">direction</span> <span class="o">-</span> <span class="mi">165</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">d1</span><span class="p">)),</span>
                                  <span class="n">y</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">d1</span><span class="p">)))</span>
        <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">d2</span><span class="p">)),</span>
                                  <span class="n">y</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">d2</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_polygon</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">],</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">robots</span><span class="p">):</span>
        <span class="s2">&quot;Redraws the visualization with the specified room and robot state.&quot;</span>
        <span class="c1"># Removes a gray square for any tiles have been cleaned.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">isTileCleaned</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)])</span>
        <span class="c1"># Delete all existing robots.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">robots</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">robot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">robots</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>
        <span class="c1"># Draw new robots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">robots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">robots</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">getRobotPosition</span><span class="p">()</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mf">0.08</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mf">0.08</span><span class="p">)</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.08</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mf">0.08</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">robots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_oval</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span>
                                                  <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">robots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draw_robot</span><span class="p">(</span><span class="n">robot</span><span class="o">.</span><span class="n">getRobotPosition</span><span class="p">(),</span> <span class="n">robot</span><span class="o">.</span><span class="n">getRobotDirection</span><span class="p">()))</span>
        <span class="c1"># Update text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span>
            <span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">NW</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">getNumCleanedTiles</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delay</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">done</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Indicate that the animation is done so that we allow the user to close the window.&quot;</span>
        <span class="n">mainloop</span><span class="p">()</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ps2_visualize</span>
<span class="n">width</span><span class="o">=</span><span class="mi">20</span>
<span class="n">height</span><span class="o">=</span><span class="mi">15</span>
<span class="n">num_robots</span><span class="o">=</span><span class="mi">5</span>
<span class="n">animation</span><span class="o">=</span><span class="n">ps2_visualize</span><span class="o">.</span><span class="n">RobotVisualization</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="n">animation</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">robots</span><span class="p">)</span>
<span class="n">animation</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 6.00.2x Problem Set 2: Simulating robots</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="c1"># import ps2_visualize</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>

<span class="c1">##################</span>
<span class="c1">## Comment/uncomment the relevant lines, depending on which version of Python you have</span>
<span class="c1">##################</span>

<span class="c1"># For Python 3.5:</span>
<span class="c1"># from ps2_verify_movement35 import testRobotMovement</span>
<span class="c1"># If you get a &quot;Bad magic number&quot; ImportError, you are not using Python 3.5 </span>

<span class="c1"># For Python 3.6:</span>
<span class="c1"># from ps2_verify_movement38 import testRobotMovement</span>
<span class="c1"># If you get a &quot;Bad magic number&quot; ImportError, you are not using Python 3.6</span>

<span class="c1"># === Provided class Position</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Position</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Position represents a location in a two-dimensional room.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a position with coordinates (x, y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">getX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNewPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">speed</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes and returns the new Position after a single clock-tick has</span>
<span class="sd">        passed, with this object as the current position, and with the</span>
<span class="sd">        specified angle and speed.</span>

<span class="sd">        Does NOT test whether the returned position fits inside the room.</span>

<span class="sd">        angle: number representing angle in degrees, 0 &lt;= angle &lt; 360</span>
<span class="sd">        speed: positive float representing speed</span>

<span class="sd">        Returns: a Position object representing the new position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="c1"># Compute the change in position</span>
        <span class="n">delta_y</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="n">delta_x</span> <span class="o">=</span> <span class="n">speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="c1"># Add that to the existing position</span>
        <span class="n">new_x</span> <span class="o">=</span> <span class="n">old_x</span> <span class="o">+</span> <span class="n">delta_x</span>
        <span class="n">new_y</span> <span class="o">=</span> <span class="n">old_y</span> <span class="o">+</span> <span class="n">delta_y</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># === Problem 1</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RectangularRoom</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a rectangular room with the specified width and height.</span>

<span class="sd">        Initially, no tiles in the room have been cleaned.</span>

<span class="sd">        width: an integer &gt; 0</span>
<span class="sd">        height: an integer &gt; 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">=</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="o">=</span><span class="p">[[</span><span class="kc">False</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">)]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">cleanTileAtPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the tile under the position POS as cleaned.</span>

<span class="sd">        Assumes that POS represents a valid position inside this room.</span>

<span class="sd">        pos: a Position</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isTileCleaned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the tile (m, n) has been cleaned.</span>

<span class="sd">        Assumes that (m, n) represents a valid tile inside the room.</span>

<span class="sd">        m: an integer</span>
<span class="sd">        n: an integer</span>
<span class="sd">        returns: True if (m, n) is cleaned, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">getNumTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getNumCleanedTiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of clean tiles in the room.</span>

<span class="sd">        returns: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">tile</span> <span class="ow">in</span> <span class="n">row</span> <span class="k">if</span> <span class="n">tile</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRandomPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a random position inside the room.</span>

<span class="sd">        returns: a Position object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">y</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isPositionInRoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if pos is inside the room.</span>

<span class="sd">        pos: a Position object.</span>
<span class="sd">        returns: True if pos is in the room, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getX</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">getY</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span>

<span class="c1"># === Problem 2</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Robot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">speed</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room</span> <span class="o">=</span> <span class="n">room</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">getRandomPosition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRobotPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getRobotDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setRobotPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setRobotDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_position</span> <span class="o">=</span> <span class="n">calculate_new_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRobotPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">cleanTileAtPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>
<span class="c1"># === Problem 3</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StandardRobot</span><span class="p">(</span><span class="n">Robot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A StandardRobot is a Robot with the standard movement strategy.</span>

<span class="sd">    At each time-step, a StandardRobot attempts to move in its current</span>
<span class="sd">    direction; when it would hit a wall, it *instead* chooses a new direction</span>
<span class="sd">    randomly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulate the passage of a single time-step.</span>

<span class="sd">        Move the robot to a new position and mark the tile it is on as having</span>
<span class="sd">        been cleaned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_position</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">getNewPosition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">isPositionInRoom</span><span class="p">(</span><span class="n">new_position</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">=</span><span class="n">new_position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">cleanTileAtPosition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">)</span>
<span class="c1"># Uncomment this line to see your implementation of StandardRobot in action!</span>
<span class="c1"># testRobotMovement(StandardRobot, RectangularRoom)</span>

<span class="c1"># === Problem 4</span>
<span class="k">def</span><span class="w"> </span><span class="nf">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">min_coverage</span><span class="p">,</span> <span class="n">num_trials</span><span class="p">,</span>
                  <span class="n">robot_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs NUM_TRIALS trials of the simulation and returns the mean number of</span>
<span class="sd">    time-steps needed to clean the fraction MIN_COVERAGE of the room.</span>

<span class="sd">    The simulation is run with NUM_ROBOTS robots of type ROBOT_TYPE, each with</span>
<span class="sd">    speed SPEED, in a room of dimensions WIDTH x HEIGHT.</span>

<span class="sd">    num_robots: an int (num_robots &gt; 0)</span>
<span class="sd">    speed: a float (speed &gt; 0)</span>
<span class="sd">    width: an int (width &gt; 0)</span>
<span class="sd">    height: an int (height &gt; 0)</span>
<span class="sd">    min_coverage: a float (0 &lt;= min_coverage &lt;= 1.0)</span>
<span class="sd">    num_trials: an int (num_trials &gt; 0)</span>
<span class="sd">    robot_type: class of robot to be instantiated (e.g. StandardRobot or</span>
<span class="sd">                RandomWalkRobot)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_time_steps</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
        <span class="n">room</span> <span class="o">=</span> <span class="n">RectangularRoom</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>  <span class="c1"># Create a room object</span>
        <span class="n">robots</span> <span class="o">=</span> <span class="p">[</span><span class="n">robot_type</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_robots</span><span class="p">)]</span>  <span class="c1"># Create robots</span>
        
        <span class="k">while</span> <span class="n">room</span><span class="o">.</span><span class="n">getNumCleanedTiles</span><span class="p">()</span> <span class="o">/</span> <span class="n">room</span><span class="o">.</span><span class="n">getNumTiles</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">min_coverage</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">robots</span><span class="p">:</span>
                <span class="n">robot</span><span class="o">.</span><span class="n">updatePositionAndClean</span><span class="p">()</span>
            <span class="n">total_time_steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">mean_time_steps</span> <span class="o">=</span> <span class="n">total_time_steps</span> <span class="o">/</span> <span class="n">num_trials</span>
    <span class="k">return</span> <span class="n">mean_time_steps</span>
<span class="c1"># Uncomment this line to see how much your simulation takes on average</span>
<span class="c1"># print(runSimulation(1, 1.0, 5, 5, 0.7, 1000,  StandardRobot))</span>

<span class="c1"># === Problem 5</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RandomWalkRobot</span><span class="p">(</span><span class="n">Robot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A RandomWalkRobot is a robot with the &quot;random walk&quot; movement strategy: it</span>
<span class="sd">    chooses a new direction at random at the end of each time-step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">updatePositionAndClean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulate the passage of a single time-step.</span>

<span class="sd">        Move the robot to a new position and mark the tile it is on as having</span>
<span class="sd">        been cleaned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_direction</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">270</span><span class="p">])</span>
        <span class="n">new_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">getNewPosition</span><span class="p">(</span><span class="n">new_direction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">isPositionInRoom</span><span class="p">(</span><span class="n">new_position</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setRobotPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">room</span><span class="o">.</span><span class="n">cleanTileAtPosition</span><span class="p">(</span><span class="n">new_position</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">showPlot1</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    What information does the plot produced by this function tell you?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_robot_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
    <span class="n">times1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">num_robots</span> <span class="ow">in</span> <span class="n">num_robot_range</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Plotting&quot;</span><span class="p">,</span> <span class="n">num_robots</span><span class="p">,</span> <span class="s2">&quot;robots...&quot;</span><span class="p">)</span>
        <span class="n">times1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">StandardRobot</span><span class="p">))</span>
        <span class="n">times2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="n">num_robots</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">RandomWalkRobot</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_robot_range</span><span class="p">,</span> <span class="n">times1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_robot_range</span><span class="p">,</span> <span class="n">times2</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s1">&#39;StandardRobot&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomWalkRobot&#39;</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">showPlot2</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    What information does the plot produced by this function tell you?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">aspect_ratios</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">times2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">width</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">]:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">300</span><span class="o">//</span><span class="n">width</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Plotting cleaning time for a room of width:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="s2">&quot;by height:&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">aspect_ratios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">times1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">StandardRobot</span><span class="p">))</span>
        <span class="n">times2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">runSimulation</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">RandomWalkRobot</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect_ratios</span><span class="p">,</span> <span class="n">times1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect_ratios</span><span class="p">,</span> <span class="n">times2</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s1">&#39;StandardRobot&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomWalkRobot&#39;</span><span class="p">))</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># === Problem 6</span>
<span class="c1"># NOTE: If you are running the simulation, you will have to close it </span>
<span class="c1"># before the plot will show up.</span>
<span class="c1"># 1) Write a function call to showPlot1 that generates an appropriately-labelled</span>
<span class="c1">#     plot.</span>
<span class="c1"># showPlot1(&#39;title&#39;, &#39;x_label&#39;, &#39;y_label&#39;)</span>
<span class="c1"># 2) Write a function call to showPlot2 that generates an appropriately-labelled</span>
<span class="c1">#     plot.</span>
<span class="n">showPlot2</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;x_label&#39;</span><span class="p">,</span> <span class="s1">&#39;y_label&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="unit-3-inferential-statistics-and-monte-carlo-simulations">
<h2><span class="section-number">12.4. </span>Unit 3 - Inferential Statistics and Monte Carlo Simulations<a class="headerlink" href="#unit-3-inferential-statistics-and-monte-carlo-simulations" title="Link to this heading">#</a></h2>
<section id="inferential-statistics">
<h3><span class="section-number">12.4.1. </span>Inferential Statistics<a class="headerlink" href="#inferential-statistics" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FairRoulette</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">37</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">=</span><span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blackOdds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">redOdds</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pocketOdds</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">spin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">isBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">&lt;=</span><span class="mi">10</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">&gt;</span><span class="mi">18</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">&lt;=</span><span class="mi">28</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">%</span><span class="k">2</span>==0
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="o">%</span><span class="k">2</span>==1
    <span class="k">def</span><span class="w"> </span><span class="nf">isRed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isBlack</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">betBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amt</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isBlack</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">amt</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">blackOdds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="n">amt</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">betRed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amt</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isRed</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">amt</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">redOdds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="n">amt</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">betPocket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pocket</span><span class="p">,</span> <span class="n">amt</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">pocket</span><span class="p">)</span><span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ball</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">amt</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pocketOdds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="n">amt</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Fair Roulette&#39;</span>
<span class="k">def</span><span class="w"> </span><span class="nf">playRoulette</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">numSpins</span><span class="p">,</span> <span class="n">toPrint</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">luckyNumber</span><span class="o">=</span><span class="s1">&#39;2&#39;</span>
    <span class="n">bet</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">totRed</span><span class="p">,</span> <span class="n">totBlack</span><span class="p">,</span> <span class="n">totPocket</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSpins</span><span class="p">):</span>
        <span class="n">game</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>
        <span class="n">totRed</span><span class="o">+=</span><span class="n">game</span><span class="o">.</span><span class="n">betRed</span><span class="p">(</span><span class="n">bet</span><span class="p">)</span>
        <span class="n">totBlack</span><span class="o">+=</span><span class="n">game</span><span class="o">.</span><span class="n">betBlack</span><span class="p">(</span><span class="n">bet</span><span class="p">)</span>
        <span class="n">totPocket</span><span class="o">+=</span><span class="n">game</span><span class="o">.</span><span class="n">betPocket</span><span class="p">(</span><span class="n">luckyNumber</span><span class="p">,</span> <span class="n">bet</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">toPrint</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">numSpins</span><span class="p">,</span> <span class="s1">&#39;spins of&#39;</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expected return betting red =&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">totRed</span><span class="o">/</span><span class="n">numSpins</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expected return betting black =&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">totBlack</span><span class="o">/</span><span class="n">numSpins</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expected return betting&#39;</span><span class="p">,</span> <span class="n">luckyNumber</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">totPocket</span><span class="o">/</span><span class="n">numSpins</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;%</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">totRed</span><span class="o">/</span><span class="n">numSpins</span><span class="p">,</span> <span class="n">totBlack</span><span class="o">/</span><span class="n">numSpins</span><span class="p">,</span> <span class="n">totPocket</span><span class="o">/</span><span class="n">numSpins</span><span class="p">)</span>
<span class="c1">#trial</span>
<span class="n">numSpins</span><span class="o">=</span><span class="mi">500000</span>
<span class="n">game</span><span class="o">=</span><span class="n">FairRoulette</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">playRoulette</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">numSpins</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EuRoulette</span><span class="p">(</span><span class="n">FairRoulette</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">FairRoulette</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;European Roulette&#39;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AmRoulette</span><span class="p">(</span><span class="n">EuRoulette</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">EuRoulette</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pockets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;American Roulette&#39;</span>
<span class="k">def</span><span class="w"> </span><span class="nf">findPocketReturn</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">trialSize</span><span class="p">,</span> <span class="n">toPrint</span><span class="p">):</span>
    <span class="n">pocketReturns</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">trialVals</span><span class="o">=</span><span class="n">playRoulette</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">trialSize</span><span class="p">,</span> <span class="n">toPrint</span><span class="p">)</span>
        <span class="n">pocketReturns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trialVals</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">pocketReturns</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">numTrials</span><span class="o">=</span><span class="mi">20</span>
<span class="n">resultDict</span><span class="o">=</span><span class="p">{}</span>
<span class="n">games</span><span class="o">=</span><span class="p">(</span><span class="n">FairRoulette</span><span class="p">,</span> <span class="n">EuRoulette</span><span class="p">,</span> <span class="n">AmRoulette</span><span class="p">)</span>
<span class="k">for</span> <span class="n">G</span> <span class="ow">in</span> <span class="n">games</span><span class="p">:</span>
    <span class="n">resultDict</span><span class="p">[</span><span class="n">G</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()]</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">numSpins</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Simulate betting a pocket for&#39;</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">,</span> <span class="s1">&#39;trials of&#39;</span><span class="p">,</span> <span class="n">numSpins</span><span class="p">,</span> <span class="s1">&#39;spins each&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">G</span> <span class="ow">in</span> <span class="n">games</span><span class="p">:</span>
        <span class="n">pocketReturns</span><span class="o">=</span><span class="n">findPocketReturn</span><span class="p">(</span><span class="n">G</span><span class="p">(),</span> <span class="n">numTrials</span><span class="p">,</span> <span class="n">numSpins</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exp. return for&#39;</span><span class="p">,</span> <span class="n">G</span><span class="p">(),</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">pocketReturns</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pocketReturns</span><span class="p">))))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">getMeanAndStd</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="n">mean</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>
    <span class="n">tot</span><span class="o">=</span><span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
        <span class="n">tot</span><span class="o">+=</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">mean</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">std</span><span class="o">=</span><span class="p">(</span><span class="n">tot</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>
    <span class="k">return</span> <span class="n">mean</span><span class="p">,</span> <span class="n">std</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="monte-carlo-simulations">
<h3><span class="section-number">12.4.2. </span>Monte Carlo Simulations<a class="headerlink" href="#monte-carlo-simulations" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Pylab Array</span>
<span class="c1">#This code shows the very basics of creating arrays and using them</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="c1">#Array of ints</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="c1">#Array of floats</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
<span class="c1">#Can do math on the arrays very easily, which we couldn&#39;t do with lists</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1">#Can even do element-wise operations like sine:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pylab</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="c1">#Like lists, arrays can be sliced and mutated</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1">#Add elements to an array using the append function</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1">#It is more efficient to create arrays of a large size at once rather than</span>
<span class="c1">#increasing its length in steps. To create a matrix of zeros or ones:</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="c1">#To change the element of f at row 2 and column 1 to 5 we would write:</span>
<span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1">#To change the whole second row to 10, we could write:</span>
<span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">,:]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1">#Other useful functions are arrange and linspace. arrange returns an array</span>
<span class="c1">#with regularly incremented values. linspace returns an array with a</span>
<span class="c1">#specified number of elements between beginning and end values</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pylab</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pylab</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">pi</span>
<span class="k">def</span><span class="w"> </span><span class="nf">throwNeedles</span><span class="p">(</span><span class="n">numNeedles</span><span class="p">):</span>
    <span class="n">inCircle</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numNeedles</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">x</span><span class="o">=</span><span class="n">random</span><span class="p">()</span>
        <span class="n">y</span><span class="o">=</span><span class="n">random</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="o">&lt;=</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">inCircle</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="mi">4</span><span class="o">*</span><span class="p">(</span><span class="n">inCircle</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">numNeedles</span><span class="p">))</span>
<span class="n">avg</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">pi</span><span class="o">=</span><span class="n">throwNeedles</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
    <span class="n">avg</span><span class="o">+=</span><span class="n">pi</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pi is roughly&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">avg</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error is :&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">avg</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="problem-set-3">
<h3><span class="section-number">12.4.3. </span>Problem Set 3<a class="headerlink" href="#problem-set-3" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">NoChildException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleVirus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of a simple virus (does not model drug effects/resistance).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a SimpleVirus instance, saves all parameters as attributes</span>
<span class="sd">        of the instance.        </span>
<span class="sd">        maxBirthProb: Maximum reproduction probability (a float between 0-1)        </span>
<span class="sd">        clearProb: Maximum clearance probability (a float between 0-1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">=</span><span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="o">=</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxBirthProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the max birth probability.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getClearProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the clear probability.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doesClear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Stochastically determines whether this virus particle is cleared from the</span>
<span class="sd">        patient&#39;s body at a time step. </span>
<span class="sd">        returns: True with probability self.getClearProb and otherwise returns</span>
<span class="sd">        False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the Patient and</span>
<span class="sd">        TreatedPatient classes. The virus particle reproduces with probability</span>
<span class="sd">        self.maxBirthProb * (1 - popDensity).</span>
<span class="sd">        </span>
<span class="sd">        If this virus particle reproduces, then reproduce() creates and returns</span>
<span class="sd">        the instance of the offspring SimpleVirus (which has the same</span>
<span class="sd">        maxBirthProb and clearProb values as its parent).         </span>

<span class="sd">        popDensity: the population density (a float), defined as the current</span>
<span class="sd">        virus population divided by the maximum population.         </span>
<span class="sd">        </span>
<span class="sd">        returns: a new instance of the SimpleVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.               </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">repProb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">popDensity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">repProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SimpleVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ResistantVirus</span><span class="p">(</span><span class="n">SimpleVirus</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of a virus which can have drug resistance.</span>
<span class="sd">    &quot;&quot;&quot;</span>   
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a ResistantVirus instance, saves all parameters as attributes</span>
<span class="sd">        of the instance.</span>

<span class="sd">        maxBirthProb: Maximum reproduction probability (a float between 0-1)       </span>

<span class="sd">        clearProb: Maximum clearance probability (a float between 0-1).</span>

<span class="sd">        resistances: A dictionary of drug names (strings) mapping to the state</span>
<span class="sd">        of this virus particle&#39;s resistance (either True or False) to each drug.</span>
<span class="sd">        e.g. {&#39;guttagonol&#39;:False, &#39;srinol&#39;:False}, means that this virus</span>
<span class="sd">        particle is resistant to neither guttagonol nor srinol.</span>

<span class="sd">        mutProb: Mutation probability for this virus particle (a float). This is</span>
<span class="sd">        the probability of the offspring acquiring or losing resistance to a drug.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">=</span><span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="o">=</span><span class="n">clearProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="o">=</span><span class="n">resistances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span><span class="o">=</span><span class="n">mutProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getResistances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the resistances for this virus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resistances</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
                <span class="n">resistances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">drug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resistances</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMutProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the mutation probability for this virus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">isResistantTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drug</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the state of this virus particle&#39;s resistance to a drug. This method</span>
<span class="sd">        is called by getResistPop() in TreatedPatient to determine how many virus</span>
<span class="sd">        particles have resistance to a drug.       </span>

<span class="sd">        drug: The drug (a string)</span>

<span class="sd">        returns: True if this virus instance is resistant to the drug, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">,</span> <span class="n">activeDrugs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the TreatedPatient class.</span>

<span class="sd">        A virus particle will only reproduce if it is resistant to ALL the drugs</span>
<span class="sd">        in the activeDrugs list. For example, if there are 2 drugs in the</span>
<span class="sd">        activeDrugs list, and the virus particle is resistant to 1 or no drugs,</span>
<span class="sd">        then it will NOT reproduce.</span>

<span class="sd">        Hence, if the virus is resistant to all drugs</span>
<span class="sd">        in activeDrugs, then the virus reproduces with probability:      </span>

<span class="sd">        self.maxBirthProb * (1 - popDensity).                       </span>

<span class="sd">        If this virus particle reproduces, then reproduce() creates and returns</span>
<span class="sd">        the instance of the offspring ResistantVirus (which has the same</span>
<span class="sd">        maxBirthProb and clearProb values as its parent). The offspring virus</span>
<span class="sd">        will have the same maxBirthProb, clearProb, and mutProb as the parent.</span>

<span class="sd">        For each drug resistance trait of the virus (i.e. each key of</span>
<span class="sd">        self.resistances), the offspring has probability 1-mutProb of</span>
<span class="sd">        inheriting that resistance trait from the parent, and probability</span>
<span class="sd">        mutProb of switching that resistance trait in the offspring.       </span>

<span class="sd">        For example, if a virus particle is resistant to guttagonol but not</span>
<span class="sd">        srinol, and self.mutProb is 0.1, then there is a 10% chance that</span>
<span class="sd">        that the offspring will lose resistance to guttagonol and a 90%</span>
<span class="sd">        chance that the offspring will be resistant to guttagonol.</span>
<span class="sd">        There is also a 10% chance that the offspring will gain resistance to</span>
<span class="sd">        srinol and a 90% chance that the offspring will not be resistant to</span>
<span class="sd">        srinol.</span>

<span class="sd">        popDensity: the population density (a float), defined as the current</span>
<span class="sd">        virus population divided by the maximum population       </span>

<span class="sd">        activeDrugs: a list of the drug names acting on this virus particle</span>
<span class="sd">        (a list of strings).</span>

<span class="sd">        returns: a new instance of the ResistantVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rep</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="n">activeDrugs</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span>
                <span class="n">rep</span><span class="o">=</span><span class="kc">False</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rep</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">popDensity</span><span class="p">)</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
                <span class="n">resistances</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="p">[:]</span>
                <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="n">resistances</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]:</span>
                            <span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span><span class="o">=</span><span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">return</span> <span class="n">ResistantVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>
<span class="n">virus</span><span class="o">=</span><span class="n">ResistantVirus</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;srinol&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">},</span> <span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NoChildException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleVirus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">=</span><span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="o">=</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxBirthProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getClearProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doesClear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the Patient and</span>
<span class="sd">        TreatedPatient classes. The virus particle reproduces with probability</span>
<span class="sd">        self.maxBirthProb * (1 - popDensity).</span>
<span class="sd">        </span>
<span class="sd">        If this virus particle reproduces, then reproduce() creates and returns</span>
<span class="sd">        the instance of the offspring SimpleVirus (which has the same</span>
<span class="sd">        maxBirthProb and clearProb values as its parent).         </span>

<span class="sd">        popDensity: the population density (a float), defined as the current</span>
<span class="sd">        virus population divided by the maximum population.         </span>
<span class="sd">        </span>
<span class="sd">        returns: a new instance of the SimpleVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.               </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">repProb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">popDensity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">repProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SimpleVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">=</span><span class="n">viruses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span><span class="o">=</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getViruses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the state of the virus population in this patient for a single</span>
<span class="sd">        time step. update() should execute the following steps in this order:</span>
<span class="sd">        </span>
<span class="sd">        - Determine whether each virus particle survives and updates the list</span>
<span class="sd">        of virus particles accordingly.   </span>
<span class="sd">        </span>
<span class="sd">        - The current population density is calculated. This population density</span>
<span class="sd">          value is used until the next call to update() </span>
<span class="sd">        </span>
<span class="sd">        - Based on this value of population density, determine whether each </span>
<span class="sd">          virus particle should reproduce and add offspring virus particles to </span>
<span class="sd">          the list of viruses in this patient.                    </span>

<span class="sd">        returns: The total virus population at the end of the update (an</span>
<span class="sd">        integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">surviving</span><span class="o">=</span><span class="p">[</span><span class="n">virus</span> <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">virus</span><span class="o">.</span><span class="n">clearProb</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">=</span><span class="n">surviving</span>
        <span class="n">pd</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">offspring</span><span class="o">=</span><span class="n">virus</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NoChildException</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulationWithoutDrug</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">viruses</span> <span class="o">=</span> <span class="p">[</span><span class="n">SimpleVirus</span><span class="p">(</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numViruses</span><span class="p">)]</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">Patient</span><span class="p">(</span><span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="n">virusPopulations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">time</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="n">virusPopulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">())</span>
            <span class="n">time</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
        <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">virusPopulations</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Average Virus Population&#39;</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;SimpleVirus simulation without drug&#39;</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time Steps&#39;</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Average Virus Population&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">virusPopulations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">simulationWithoutDrug</span><span class="p">(</span><span class="mi">7500</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleVirus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of a simple virus (does not model drug effects/resistance).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a SimpleVirus instance, saves all parameters as attributes</span>
<span class="sd">        of the instance.        </span>
<span class="sd">        maxBirthProb: Maximum reproduction probability (a float between 0-1)        </span>
<span class="sd">        clearProb: Maximum clearance probability (a float between 0-1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">=</span><span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="o">=</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxBirthProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the max birth probability.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getClearProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the clear probability.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doesClear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Stochastically determines whether this virus particle is cleared from the</span>
<span class="sd">        patient&#39;s body at a time step. </span>
<span class="sd">        returns: True with probability self.getClearProb and otherwise returns</span>
<span class="sd">        False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the Patient and</span>
<span class="sd">        TreatedPatient classes. The virus particle reproduces with probability</span>
<span class="sd">        self.maxBirthProb * (1 - popDensity).</span>
<span class="sd">        </span>
<span class="sd">        If this virus particle reproduces, then reproduce() creates and returns</span>
<span class="sd">        the instance of the offspring SimpleVirus (which has the same</span>
<span class="sd">        maxBirthProb and clearProb values as its parent).         </span>

<span class="sd">        popDensity: the population density (a float), defined as the current</span>
<span class="sd">        virus population divided by the maximum population.         </span>
<span class="sd">        </span>
<span class="sd">        returns: a new instance of the SimpleVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.               </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">repProb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">popDensity</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">repProb</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">SimpleVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="k">pass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of a simplified patient. The patient does not take any drugs</span>
<span class="sd">    and his/her virus populations have no drug resistance.</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialization function, saves the viruses and maxPop parameters as</span>
<span class="sd">        attributes.</span>

<span class="sd">        viruses: the list representing the virus population (a list of</span>
<span class="sd">        SimpleVirus instances)</span>

<span class="sd">        maxPop: the maximum virus population for this patient (an integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">=</span><span class="n">viruses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span><span class="o">=</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getViruses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the viruses in this Patient.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the max population.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the size of the current total virus population. </span>
<span class="sd">        returns: The total virus population (an integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the state of the virus population in this patient for a single</span>
<span class="sd">        time step. update() should execute the following steps in this order:</span>
<span class="sd">        </span>
<span class="sd">        - Determine whether each virus particle survives and updates the list</span>
<span class="sd">        of virus particles accordingly.   </span>
<span class="sd">        </span>
<span class="sd">        - The current population density is calculated. This population density</span>
<span class="sd">          value is used until the next call to update() </span>
<span class="sd">        </span>
<span class="sd">        - Based on this value of population density, determine whether each </span>
<span class="sd">          virus particle should reproduce and add offspring virus particles to </span>
<span class="sd">          the list of viruses in this patient.                    </span>

<span class="sd">        returns: The total virus population at the end of the update (an</span>
<span class="sd">        integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="k">if</span> <span class="n">virus</span><span class="o">.</span><span class="n">doesClear</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">virus</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="n">offspring</span><span class="o">=</span><span class="n">virus</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
<span class="n">virus</span><span class="o">=</span><span class="n">SimpleVirus</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">patient</span><span class="o">=</span><span class="n">Patient</span><span class="p">([</span><span class="n">virus</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="n">patient</span><span class="o">.</span><span class="n">totalPop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NoChildException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleVirus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span> <span class="o">=</span> <span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span> <span class="o">=</span> <span class="n">clearProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxBirthProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getClearProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">doesClear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">):</span>
        <span class="n">repProb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">popDensity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">repProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SimpleVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span> <span class="o">=</span> <span class="n">viruses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span> <span class="o">=</span> <span class="n">maxPop</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getViruses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="k">if</span> <span class="n">virus</span><span class="o">.</span><span class="n">doesClear</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">virus</span><span class="p">)</span>
        <span class="n">pd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">offspring</span> <span class="o">=</span> <span class="n">virus</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NoChildException</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Handle the exception as desired</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1"># PROBLEM 2</span>
<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulationWithoutDrug</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the simulation and plot the graph for problem 3 (no drugs are used,</span>
<span class="sd">    viruses do not have any drug resistance).    </span>
<span class="sd">    For each of numTrials trial, instantiates a patient, runs a simulation</span>
<span class="sd">    for 300 timesteps, and plots the average virus population size as a function of time.</span>

<span class="sd">    numViruses: number of SimpleVirus to create for patient (an integer)</span>
<span class="sd">    maxPop: maximum virus population for patient (an integer)</span>
<span class="sd">    maxBirthProb: Maximum reproduction probability (a float between 0-1)        </span>
<span class="sd">    clearProb: Maximum clearance probability (a float between 0-1)</span>
<span class="sd">    numTrials: number of simulation runs to execute (an integer)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xvals</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">yvals</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">virus</span><span class="o">=</span><span class="n">SimpleVirus</span><span class="p">(</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">)</span>
        <span class="n">viruses</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numViruses</span><span class="p">):</span>
            <span class="n">viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">virus</span><span class="p">)</span>
        <span class="n">patient</span><span class="o">=</span><span class="n">Patient</span><span class="p">(</span><span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">xvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">yvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">viruses</span><span class="p">))</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;SimpleVirus simulation&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time Steps&quot;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Average Virus Population&quot;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">simulationWithoutDrug</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Problem Set 3: Simulating the Spread of Disease and Virus Population Dynamics </span>

<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>

<span class="sd">&#39;&#39;&#39; </span>
<span class="sd">Begin helper code</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NoChildException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    NoChildException is raised by the reproduce() method in the SimpleVirus</span>
<span class="sd">    and ResistantVirus classes to indicate that a virus particle does not</span>
<span class="sd">    reproduce. You can use NoChildException as is, you do not need to</span>
<span class="sd">    modify/add any code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">End helper code</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="c1">#</span>
<span class="c1"># PROBLEM 1</span>
<span class="c1">#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleVirus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">=</span><span class="n">maxBirthProb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="o">=</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxBirthProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getClearProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doesClear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the Patient and</span>
<span class="sd">        TreatedPatient classes. The virus particle reproduces with probability</span>
<span class="sd">        self.maxBirthProb * (1 - popDensity).</span>
<span class="sd">        </span>
<span class="sd">        If this virus particle reproduces, then reproduce() creates and returns</span>
<span class="sd">        the instance of the offspring SimpleVirus (which has the same</span>
<span class="sd">        maxBirthProb and clearProb values as its parent).         </span>

<span class="sd">        popDensity: the population density (a float), defined as the current</span>
<span class="sd">        virus population divided by the maximum population.         </span>
<span class="sd">        </span>
<span class="sd">        returns: a new instance of the SimpleVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.               </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">repProb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">popDensity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">repProb</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SimpleVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">=</span><span class="n">viruses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span><span class="o">=</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getViruses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getMaxPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the state of the virus population in this patient for a single</span>
<span class="sd">        time step. update() should execute the following steps in this order:</span>
<span class="sd">        </span>
<span class="sd">        - Determine whether each virus particle survives and updates the list</span>
<span class="sd">        of virus particles accordingly.   </span>
<span class="sd">        </span>
<span class="sd">        - The current population density is calculated. This population density</span>
<span class="sd">          value is used until the next call to update() </span>
<span class="sd">        </span>
<span class="sd">        - Based on this value of population density, determine whether each </span>
<span class="sd">          virus particle should reproduce and add offspring virus particles to </span>
<span class="sd">          the list of viruses in this patient.                    </span>

<span class="sd">        returns: The total virus population at the end of the update (an</span>
<span class="sd">        integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">surviving</span><span class="o">=</span><span class="p">[</span><span class="n">virus</span> <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">virus</span><span class="o">.</span><span class="n">clearProb</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">=</span><span class="n">surviving</span>
        <span class="n">pd</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">[:]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">offspring</span><span class="o">=</span><span class="n">virus</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NoChildException</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1"># PROBLEM 2</span>
<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulationWithoutDrug</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span>
                          <span class="n">numTrials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the simulation and plot the graph for problem 3 (no drugs are used,</span>
<span class="sd">    viruses do not have any drug resistance).    </span>
<span class="sd">    For each of numTrials trial, instantiates a patient, runs a simulation</span>
<span class="sd">    for 300 timesteps, and plots the average virus population size as a</span>
<span class="sd">    function of time.</span>

<span class="sd">    numViruses: number of SimpleVirus to create for patient (an integer)</span>
<span class="sd">    maxPop: maximum virus population for patient (an integer)</span>
<span class="sd">    maxBirthProb: Maximum reproduction probability (a float between 0-1)        </span>
<span class="sd">    clearProb: Maximum clearance probability (a float between 0-1)</span>
<span class="sd">    numTrials: number of simulation runs to execute (an integer)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xvals</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">yvals</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">patient</span><span class="o">=</span><span class="n">Patient</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">xvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">yvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        
<span class="c1"># Enter your definitions for the ResistantVirus and TreatedPatient classes in this box.</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ResistantVirus</span><span class="p">(</span><span class="n">SimpleVirus</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">):</span>
        <span class="n">SimpleVirus</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span> <span class="o">=</span> <span class="n">resistances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span> <span class="o">=</span> <span class="n">mutProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getResistances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the resistances for this virus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getMutProb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the mutation probability for this virus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">isResistantTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drug</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the state of this virus particle&#39;s resistance to a drug. This method</span>
<span class="sd">        is called by getResistPop() in TreatedPatient to determine how many virus</span>
<span class="sd">        particles have resistance to a drug.</span>

<span class="sd">        drug: The drug (a string)</span>

<span class="sd">        returns: True if this virus instance is resistant to the drug, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drug</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reproduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popDensity</span><span class="p">,</span> <span class="n">activeDrugs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stochastically determines whether this virus particle reproduces at a</span>
<span class="sd">        time step. Called by the update() method in the TreatedPatient class.</span>

<span class="sd">        A virus particle will only reproduce if it is resistant to ALL the drugs</span>
<span class="sd">        in the activeDrugs list.</span>

<span class="sd">        popDensity: the population density (a float), defined as the current virus population divided by the maximum population</span>

<span class="sd">        activeDrugs: a list of the drug names acting on this virus particle(a list of strings).</span>

<span class="sd">        returns: a new instance of the ResistantVirus class representing the</span>
<span class="sd">        offspring of this virus particle. The child should have the same</span>
<span class="sd">        maxBirthProb and clearProb values as this virus. Raises a</span>
<span class="sd">        NoChildException if this virus particle does not reproduce.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rep</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drug</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="n">activeDrugs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rep</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">popDensity</span><span class="p">):</span>
            <span class="n">child_resistances</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">drug</span><span class="p">,</span> <span class="n">resist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resistances</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span><span class="p">:</span>
                    <span class="c1"># Mutate resistance trait</span>
                    <span class="n">child_resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">resist</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Inherit resistance trait without mutation</span>
                    <span class="n">child_resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]</span> <span class="o">=</span> <span class="n">resist</span>
            <span class="k">return</span> <span class="n">ResistantVirus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearProb</span><span class="p">,</span> <span class="n">child_resistances</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutProb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoChildException</span><span class="p">(</span><span class="s2">&quot;This virus particle does not reproduce.&quot;</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TreatedPatient</span><span class="p">(</span><span class="n">Patient</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">):</span>
        <span class="n">Patient</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drugs</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">addPrescription</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newDrug</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">newDrug</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">drugs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drugs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newDrug</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getPrescriptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">drugs</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getResistPop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drugResist</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the population of virus particles resistant to the drugs listed in</span>
<span class="sd">        drugResist.       </span>

<span class="sd">        drugResist: Which drug resistances to include in the population (a list</span>
<span class="sd">        of strings - e.g. [&#39;guttagonol&#39;] or [&#39;guttagonol&#39;, &#39;srinol&#39;])</span>

<span class="sd">        returns: The population of viruses (an integer) with resistances to all</span>
<span class="sd">        drugs in the drugResist list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pop</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">:</span>
            <span class="n">resist</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">resistances</span><span class="o">=</span><span class="n">virus</span><span class="o">.</span><span class="n">resistances</span>
            <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="n">resistances</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resistances</span><span class="p">[</span><span class="n">drug</span><span class="p">]:</span>
                    <span class="n">resist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">drug</span><span class="p">)</span>
            <span class="n">resistant</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">for</span> <span class="n">drug</span> <span class="ow">in</span> <span class="n">drugResist</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">drug</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">resist</span><span class="p">:</span>
                    <span class="n">resistant</span><span class="o">=</span><span class="kc">False</span>
            <span class="k">if</span> <span class="n">resistant</span><span class="p">:</span>
                <span class="n">pop</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">pop</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the state of the virus population in this patient for a single</span>
<span class="sd">        time step. update() should execute these actions in order:</span>

<span class="sd">        - Determine whether each virus particle survives and update the list of</span>
<span class="sd">          virus particles accordingly</span>

<span class="sd">        - The current population density is calculated. This population density</span>
<span class="sd">          value is used until the next call to update().</span>

<span class="sd">        - Based on this value of population density, determine whether each </span>
<span class="sd">          virus particle should reproduce and add offspring virus particles to </span>
<span class="sd">          the list of viruses in this patient.</span>
<span class="sd">          The list of drugs being administered should be accounted for in the</span>
<span class="sd">          determination of whether each virus particle reproduces.</span>

<span class="sd">        returns: The total virus population at the end of the update (an</span>
<span class="sd">        integer)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">surviving_viruses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">virus</span><span class="o">.</span><span class="n">doesClear</span><span class="p">():</span>
                <span class="n">surviving_viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">virus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span> <span class="o">=</span> <span class="n">surviving_viruses</span>
        
        <span class="n">population_density</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxPop</span>
        <span class="n">new_viruses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">virus</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">offspring</span> <span class="o">=</span> <span class="n">virus</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">population_density</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">drugs</span><span class="p">)</span>
                <span class="n">new_viruses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NoChildException</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_viruses</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viruses</span><span class="p">)</span>
<span class="c1"># Enter your definition for simulationWithDrug in this box</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulationWithDrug</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span>
                       <span class="n">mutProb</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
    <span class="n">avgvals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">300</span>
    <span class="n">avgvals1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">300</span>
    
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">yvals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">virus</span> <span class="o">=</span> <span class="n">ResistantVirus</span><span class="p">(</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">)</span>
        <span class="n">viruses</span> <span class="o">=</span> <span class="p">[</span><span class="n">virus</span><span class="p">]</span> <span class="o">*</span> <span class="n">numViruses</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">TreatedPatient</span><span class="p">(</span><span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">150</span><span class="p">):</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">yvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">getTotalPop</span><span class="p">())</span>
        
        <span class="n">patient</span><span class="o">.</span><span class="n">addPrescription</span><span class="p">(</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">150</span><span class="p">):</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">yvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">getTotalPop</span><span class="p">())</span>
        
        <span class="n">avgvals</span> <span class="o">=</span> <span class="p">[</span><span class="n">avg</span> <span class="o">+</span> <span class="n">val</span> <span class="o">/</span> <span class="n">numTrials</span> <span class="k">for</span> <span class="n">avg</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">avgvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">)]</span>
    
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">yvals1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">newPatient</span> <span class="o">=</span> <span class="n">TreatedPatient</span><span class="p">(</span><span class="n">viruses</span><span class="p">[:],</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="n">newPatient</span><span class="o">.</span><span class="n">addPrescription</span><span class="p">(</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="n">newPatient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">yvals1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newPatient</span><span class="o">.</span><span class="n">getTotalPop</span><span class="p">())</span>
        
        <span class="n">avgvals1</span> <span class="o">=</span> <span class="p">[</span><span class="n">avg</span> <span class="o">+</span> <span class="n">val</span> <span class="o">/</span> <span class="n">numTrials</span> <span class="k">for</span> <span class="n">avg</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">avgvals1</span><span class="p">,</span> <span class="n">yvals1</span><span class="p">)]</span>
    
    <span class="n">avgvals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">avg</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">avg</span> <span class="ow">in</span> <span class="n">avgvals</span><span class="p">]</span>
    <span class="n">avgvals1</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">avg</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">avg</span> <span class="ow">in</span> <span class="n">avgvals1</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">avgvals</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">avgvals1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">avgvals</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">avgvals1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;ResistantVirus simulation&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;time step&quot;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;# viruses&quot;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">simulationWithDrug</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulationWithDrug</span><span class="p">(</span><span class="n">numViruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">,</span> <span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
    <span class="n">orre</span><span class="o">=</span><span class="n">resistances</span>
    <span class="n">avgCounts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">300</span>
    <span class="n">avgCounts1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">300</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">viruses</span> <span class="o">=</span> <span class="p">[</span><span class="n">ResistantVirus</span><span class="p">(</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numViruses</span><span class="p">)]</span>
        <span class="c1"># print(len(viruses)==numViruses)</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">TreatedPatient</span><span class="p">(</span><span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="n">virusCounts</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="mi">150</span><span class="p">:</span>
                <span class="n">patient</span><span class="o">.</span><span class="n">addPrescription</span><span class="p">(</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">)</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">virusCounts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">getTotalPop</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">virusCounts</span><span class="p">)):</span>
            <span class="n">avgCounts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+=</span><span class="n">virusCounts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="mi">5</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">avgCounts</span><span class="p">)):</span>
        <span class="n">avgCounts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">avgCounts</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">viruses</span><span class="o">=</span><span class="p">[</span><span class="n">ResistantVirus</span><span class="p">(</span><span class="n">maxBirthProb</span><span class="p">,</span> <span class="n">clearProb</span><span class="p">,</span> <span class="n">resistances</span><span class="p">,</span> <span class="n">mutProb</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numViruses</span><span class="p">)]</span>
        <span class="n">patient</span><span class="o">=</span><span class="n">TreatedPatient</span><span class="p">(</span><span class="n">viruses</span><span class="p">,</span> <span class="n">maxPop</span><span class="p">)</span>
        <span class="n">virusCounts</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">patient</span><span class="o">.</span><span class="n">addPrescription</span><span class="p">(</span><span class="s1">&#39;guttagonol&#39;</span><span class="p">)</span>
            <span class="n">patient</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">virusCounts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patient</span><span class="o">.</span><span class="n">getTotalPop</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">virusCounts</span><span class="p">)):</span>
            <span class="n">avgCounts1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+=</span><span class="n">virusCounts</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">/</span><span class="mi">5</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">avgCounts1</span><span class="p">)):</span>
        <span class="n">avgCounts1</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">avgCounts1</span><span class="p">[</span><span class="n">l</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
    <span class="c1"># print(orre)</span>
    <span class="k">if</span> <span class="n">orre</span><span class="o">==</span><span class="p">{}:</span>
        <span class="n">avgCounts1</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span><span class="o">*</span><span class="mi">300</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">avgCounts</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
    <span class="c1"># print(avgCounts1[:10])</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">avgCounts</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">avgCounts1</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ResistantVirus simulation&quot;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time step&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;# viruses&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;drug added at 150&#39;</span><span class="p">,</span> <span class="s1">&#39;drug added at 0&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">simulationWithDrug</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="midterm-exam">
<h2><span class="section-number">12.5. </span>Midterm Exam<a class="headerlink" href="#midterm-exam" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">randint</span><span class="p">,</span> <span class="n">seed</span>
<span class="n">seed</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Drunk1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;This drunk is called&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UsualDrunk</span><span class="p">(</span><span class="n">Drunk1</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span> <span class="o">=</span>\
            <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
        <span class="n">step</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
        <span class="n">co1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">co2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">st1</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">st2</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">co1</span><span class="o">+=</span><span class="n">st1</span>
        <span class="n">co2</span><span class="o">+=</span><span class="n">st2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="n">co1</span><span class="p">,</span> <span class="n">co2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">step</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ColdDrunk</span><span class="p">(</span><span class="n">Drunk1</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span> <span class="o">=</span>\
            <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.03</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.03</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.03</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
        <span class="n">step</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
        <span class="n">co1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">co2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">st1</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">st2</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">co1</span><span class="o">+=</span><span class="n">st1</span>
        <span class="n">co2</span><span class="o">+=</span><span class="n">st2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="n">co1</span><span class="p">,</span> <span class="n">co2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">step</span>

<span class="k">class</span><span class="w"> </span><span class="nc">EDrunk</span><span class="p">(</span><span class="n">Drunk1</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="n">step</span><span class="o">=</span><span class="p">(</span><span class="n">length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">),</span> <span class="n">length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">))</span>
        <span class="n">co1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">co2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">st1</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">st2</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">co1</span><span class="o">+=</span><span class="n">st1</span>
        <span class="n">co2</span><span class="o">+=</span><span class="n">st2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="n">co1</span><span class="p">,</span> <span class="n">co2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">step</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PhotoDrunk</span><span class="p">(</span><span class="n">Drunk1</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span> <span class="o">=</span>\
                    <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span>
                     <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
        <span class="n">step</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
        <span class="n">co1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">co2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">st1</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">st2</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">co1</span><span class="o">+=</span><span class="n">st1</span>
        <span class="n">co2</span><span class="o">+=</span><span class="n">st2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="n">co1</span><span class="p">,</span> <span class="n">co2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">step</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DDrunk</span><span class="p">(</span><span class="n">Drunk1</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">takeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stepChoices</span> <span class="o">=</span>\
                    <span class="p">[(</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.85</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.85</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">-</span><span class="mf">0.56</span><span class="p">,</span> <span class="mf">0.56</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.56</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.56</span><span class="p">)]</span> 
        <span class="n">step</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">stepChoices</span><span class="p">)</span>
        <span class="n">co1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">co2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">st1</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">st2</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">co1</span><span class="o">+=</span><span class="n">st1</span>
        <span class="n">co2</span><span class="o">+=</span><span class="n">st2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="n">co1</span><span class="p">,</span> <span class="n">co2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">step</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">drunk</span><span class="o">=</span><span class="n">EDrunk</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
<span class="n">times</span><span class="o">=</span><span class="mi">1000</span>
<span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
        <span class="n">drunk</span><span class="o">.</span><span class="n">takeStep</span><span class="p">()</span>
    <span class="n">co</span><span class="o">=</span><span class="n">drunk</span><span class="o">.</span><span class="n">coordinates</span>
    <span class="n">co1</span><span class="o">=</span><span class="n">co</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">co2</span><span class="o">=</span><span class="n">co</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">av1</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">av2</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">av1</span><span class="o">+=</span><span class="n">co1</span>
    <span class="n">av2</span><span class="o">+=</span><span class="n">co2</span>
    <span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="n">av1</span><span class="p">,</span> <span class="n">av2</span><span class="p">)</span>
    <span class="n">drunk</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">av1</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">av2</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">av1</span><span class="o">/=</span><span class="n">times</span>
<span class="n">av2</span><span class="o">/=</span><span class="n">times</span>
<span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="n">av1</span><span class="p">,</span> <span class="n">av2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Avg :&#39;</span><span class="p">,</span> <span class="n">avg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">drunk</span><span class="o">=</span><span class="n">UsualDrunk</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
<span class="n">times</span><span class="o">=</span><span class="mi">1000</span>
<span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
        <span class="n">drunk</span><span class="o">.</span><span class="n">takeStep</span><span class="p">()</span>
    <span class="n">co</span><span class="o">=</span><span class="n">drunk</span><span class="o">.</span><span class="n">coordinates</span>
    <span class="n">co1</span><span class="o">=</span><span class="n">co</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">co2</span><span class="o">=</span><span class="n">co</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">av1</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">av2</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">av1</span><span class="o">+=</span><span class="n">co1</span>
    <span class="n">av2</span><span class="o">+=</span><span class="n">co2</span>
    <span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="n">av1</span><span class="p">,</span> <span class="n">av2</span><span class="p">)</span>
    <span class="n">drunk</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">av1</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">av2</span><span class="o">=</span><span class="n">avg</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">av1</span><span class="o">/=</span><span class="n">times</span>
<span class="n">av2</span><span class="o">/=</span><span class="n">times</span>
<span class="n">avg</span><span class="o">=</span><span class="p">(</span><span class="n">av1</span><span class="p">,</span> <span class="n">av2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Avg :&#39;</span><span class="p">,</span> <span class="n">avg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">F</span><span class="p">():</span>
    <span class="n">mylist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.99</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">number</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mylist</span><span class="p">:</span>
                <span class="n">mylist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">G</span><span class="p">():</span>  
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mylist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.99</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">mylist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">F</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">G</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">][</span><span class="o">-</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">solveit</span><span class="p">(</span><span class="n">test</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">y</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">test1</span><span class="o">=</span><span class="n">test</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">test2</span><span class="o">=</span><span class="n">test</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">test1</span> <span class="ow">or</span> <span class="n">test2</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">x</span><span class="o">+=</span><span class="mi">1</span>
            <span class="n">y</span><span class="o">-=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">test1</span> <span class="ow">and</span> <span class="n">test2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="k">elif</span> <span class="n">test1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">test2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">y</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="unit-4-experimental-data">
<h2><span class="section-number">12.6. </span>Unit 4 - Experimental Data<a class="headerlink" href="#unit-4-experimental-data" title="Link to this heading">#</a></h2>
<section id="experimental-data-part-1">
<h3><span class="section-number">12.6.1. </span>Experimental Data Part 1<a class="headerlink" href="#experimental-data-part-1" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">=</span><span class="mf">0.15</span>
<span class="n">x</span><span class="o">=</span><span class="mf">0.1015</span>
<span class="n">F</span><span class="o">=</span><span class="mf">0.15</span><span class="o">*</span><span class="mf">9.81</span>
<span class="n">k</span><span class="o">=-</span><span class="n">F</span><span class="o">/</span><span class="n">x</span>
<span class="n">k</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span>
<span class="k">def</span><span class="w"> </span><span class="nf">rSquared</span><span class="p">(</span><span class="n">observed</span><span class="p">,</span> <span class="n">predicted</span><span class="p">):</span>
    <span class="n">error</span><span class="o">=</span><span class="p">((</span><span class="n">predicted</span><span class="o">-</span><span class="n">observed</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">meanError</span><span class="o">=</span><span class="n">error</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">observed</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span><span class="p">(</span><span class="n">meanError</span><span class="o">/</span><span class="n">numpy</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">observed</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">aveMeanSquareError</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">predicted</span><span class="p">):</span>
    <span class="n">error</span><span class="o">=</span><span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="n">error</span><span class="o">+=</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">predicted</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pylab</span><span class="w"> </span><span class="kn">import</span> <span class="n">array</span><span class="p">,</span> <span class="n">polyfit</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fitData</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="n">degree</span><span class="p">):</span>
    <span class="n">xvals</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">xvals</span><span class="p">)</span>
    <span class="n">yvals</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">yvals</span><span class="p">)</span>
    <span class="n">xvals</span><span class="o">=</span><span class="n">xvals</span><span class="o">*</span><span class="mf">9.81</span> <span class="c1">#get gravity/force</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">polyfit</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="n">degree</span><span class="p">)</span>
    <span class="n">estyvals</span><span class="o">=</span><span class="n">a</span><span class="o">*</span><span class="n">array</span><span class="p">(</span><span class="n">xvals</span><span class="p">)</span><span class="o">+</span><span class="n">b</span>
    <span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="s1">&#39;bo&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Measured displacements&#39;</span><span class="p">)</span>
    <span class="n">title</span><span class="p">(</span><span class="s1">&#39;Measured Displacement of Spring&#39;</span><span class="p">)</span>
    <span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Force (Newtons)&#39;</span><span class="p">)</span>
    <span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Distance (meters)&#39;</span><span class="p">)</span>
    <span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">estyvals</span><span class="p">)</span>
    <span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">show</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fitData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="experimental-data-part-2">
<h3><span class="section-number">12.6.2. </span>Experimental Data Part 2<a class="headerlink" href="#experimental-data-part-2" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">tempDatum</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">info</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">high</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getHigh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">high</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">getYear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">getTempData</span><span class="p">():</span>
    <span class="n">inFile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temperatures.csv&#39;</span><span class="p">)</span>
    <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">inFile</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tempDatum</span><span class="p">(</span><span class="n">l</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">getYearlyMeans</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">years</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">years</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">getYear</span><span class="p">()]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">getHigh</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">years</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">getYear</span><span class="p">()]</span><span class="o">=</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">getHigh</span><span class="p">()]</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="n">years</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">years</span><span class="p">[</span><span class="n">y</span><span class="p">])</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">years</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">years</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="kn">import</span> <span class="n">polyfit</span><span class="p">,</span> <span class="n">polyval</span>
<span class="n">xvals</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50001</span><span class="p">):</span>
    <span class="n">xvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">yvals</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">xval</span> <span class="ow">in</span> <span class="n">xvals</span><span class="p">:</span>
    <span class="n">yvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xval</span><span class="o">**</span><span class="mi">4</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Actual values&#39;</span><span class="p">)</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">polyfit</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;b =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;c =&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">estyvals</span><span class="o">=</span><span class="n">polyval</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">],</span> <span class="n">xvals</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">estyvals</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Predictive values&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;R squared =&#39;</span><span class="p">,</span> <span class="n">r_squared</span><span class="p">(</span><span class="n">yvals</span><span class="p">,</span> <span class="n">estyvals</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="problem-set-4">
<h3><span class="section-number">12.6.3. </span>Problem Set 4<a class="headerlink" href="#problem-set-4" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="c1"># cities in our weather data</span>
<span class="n">CITIES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;BOSTON&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SEATTLE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SAN DIEGO&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PHILADELPHIA&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PHOENIX&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LAS VEGAS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CHARLOTTE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DALLAS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BALTIMORE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SAN JUAN&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LOS ANGELES&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MIAMI&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NEW ORLEANS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ALBUQUERQUE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PORTLAND&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SAN FRANCISCO&#39;</span><span class="p">,</span>
    <span class="s1">&#39;TAMPA&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NEW YORK&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DETROIT&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ST LOUIS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CHICAGO&#39;</span>
<span class="p">]</span>

<span class="n">INTERVAL_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1961</span><span class="p">,</span> <span class="mi">2006</span><span class="p">))</span>
<span class="n">INTERVAL_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">2016</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Begin helper code</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Climate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The collection of temperature records loaded from given csv file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Climate instance, which stores the temperature records</span>
<span class="sd">        loaded from a given csv file specified by filename.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename: name of the csv file (str)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

            <span class="n">date</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;(\d\d\d\d)(\d\d)(\d\d)&#39;</span><span class="p">,</span> <span class="n">items</span><span class="p">[</span><span class="n">header</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;DATE&#39;</span><span class="p">)])</span>
            <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>

            <span class="n">city</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">header</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;CITY&#39;</span><span class="p">)]</span>
            <span class="n">temperature</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="n">header</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;TEMP&#39;</span><span class="p">)])</span>
            <span class="k">if</span> <span class="n">city</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">month</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">][</span><span class="n">day</span><span class="p">]</span> <span class="o">=</span> <span class="n">temperature</span>
            
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_yearly_temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the daily temperatures for the given year and city.</span>

<span class="sd">        Args:</span>
<span class="sd">            city: city name (str)</span>
<span class="sd">            year: the year to get the data for (int)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a numpy 1-d array of daily temperatures for the specified year and</span>
<span class="sd">            city</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temperatures</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">assert</span> <span class="n">city</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">,</span> <span class="s2">&quot;provided city is not available&quot;</span>
        <span class="k">assert</span> <span class="n">year</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">],</span> <span class="s2">&quot;provided year is not available&quot;</span>
        <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">day</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">]:</span>
                    <span class="n">temperatures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">][</span><span class="n">day</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">temperatures</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_daily_temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the daily temperature for the given city and time (year + date).</span>

<span class="sd">        Args:</span>
<span class="sd">            city: city name (str)</span>
<span class="sd">            month: the month to get the data for (int, where January = 1,</span>
<span class="sd">                December = 12)</span>
<span class="sd">            day: the day to get the data for (int, where 1st day of month = 1)</span>
<span class="sd">            year: the year to get the data for (int)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a float of the daily temperature for the specified time (year +</span>
<span class="sd">            date) and city</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">city</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">,</span> <span class="s2">&quot;provided city is not available&quot;</span>
        <span class="k">assert</span> <span class="n">year</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">],</span> <span class="s2">&quot;provided year is not available&quot;</span>
        <span class="k">assert</span> <span class="n">month</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">],</span> <span class="s2">&quot;provided month is not available&quot;</span>
        <span class="k">assert</span> <span class="n">day</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">],</span> <span class="s2">&quot;provided day is not available&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">city</span><span class="p">][</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">][</span><span class="n">day</span><span class="p">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate_models</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">degs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate regression models by fitting a polynomial for each degree in degs</span>
<span class="sd">    to points (x, y).</span>
<span class="sd">    Args:</span>
<span class="sd">        x: a list with length N, representing the x-coords of N sample points</span>
<span class="sd">        y: a list with length N, representing the y-coords of N sample points</span>
<span class="sd">        degs: a list of degrees of the fitting polynomial</span>
<span class="sd">    Returns:</span>
<span class="sd">        a list of numpy arrays, where each array is a 1-d array of coefficients</span>
<span class="sd">        that minimizes the squared error of the fitting polynomial</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">models</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">deg</span> <span class="ow">in</span> <span class="n">degs</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">deg</span><span class="p">)</span>
        <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">models</span>
<span class="k">def</span><span class="w"> </span><span class="nf">r_squared</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">estimated</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the R-squared error term.</span>
<span class="sd">    Args:</span>
<span class="sd">        y: list with length N, representing the y-coords of N sample points</span>
<span class="sd">        estimated: a list of values estimated by the regression model</span>
<span class="sd">    Returns:</span>
<span class="sd">        a float for the R-squared error term</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">tot</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">mean</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
        <span class="n">tot</span><span class="o">+=</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">mean</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">res</span><span class="o">+=</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">estimated</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">res</span><span class="o">/</span><span class="n">tot</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">array</span><span class="p">):</span>
    <span class="n">array1</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">array1</span><span class="p">)</span>
    <span class="n">y</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
        <span class="n">y</span><span class="o">+=</span><span class="n">array1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">y</span>
<span class="k">def</span><span class="w"> </span><span class="nf">evaluate_models_on_training</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">models</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For each regression model, compute the R-square for this model with the</span>
<span class="sd">    standard error over slope of a linear regression line (only if the model is</span>
<span class="sd">    linear), and plot the data along with the best fit curve.</span>

<span class="sd">    For the plots, you should plot data points (x,y) as blue dots and your best</span>
<span class="sd">    fit curve (aka model) as a red solid line. You should also label the axes</span>
<span class="sd">    of this figure appropriately and have a title reporting the following</span>
<span class="sd">    information:</span>
<span class="sd">        degree of your regression model,</span>
<span class="sd">        R-square of your model evaluated on the given data points</span>
<span class="sd">    Args:</span>
<span class="sd">        x: a list of length N, representing the x-coords of N sample points</span>
<span class="sd">        y: a list of length N, representing the y-coords of N sample points</span>
<span class="sd">        models: a list containing the regression models you want to apply to</span>
<span class="sd">            your data. Each model is a numpy array storing the coefficients of</span>
<span class="sd">            a polynomial.</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="n">points</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">xval</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solve</span><span class="p">(</span><span class="n">xval</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="p">)))</span>
        <span class="n">rsquared</span><span class="o">=</span><span class="n">r_squared</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">rsquared</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;bo&#39;</span><span class="p">)</span>

<span class="c1"># ## Beginning of program</span>
<span class="n">raw_data</span> <span class="o">=</span> <span class="n">Climate</span><span class="p">(</span><span class="s1">&#39;./pset4/data.csv&#39;</span><span class="p">)</span>
<span class="c1"># </span>
<span class="c1"># Problem 3</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">INTERVAL_1</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">INTERVAL_1</span><span class="p">:</span>
    <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">get_daily_temp</span><span class="p">(</span><span class="s1">&#39;BOSTON&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">year</span><span class="p">))</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">generate_models</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="c1"># evaluate_models_on_training(x, y, models)</span>
<span class="c1"># Problem 4: FILL IN MISSING CODE TO GENERATE y VALUES</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">INTERVAL_1</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">INTERVAL_2</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">INTERVAL_1</span><span class="p">:</span>
    <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">get_yearly_temp</span><span class="p">(</span><span class="s1">&#39;BOSTON&#39;</span><span class="p">,</span> <span class="n">year</span><span class="p">)))</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">generate_models</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">evaluate_models_on_training</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">models</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="unit-5-machine-learning-and-statistical-fallacies">
<h2><span class="section-number">12.7. </span>Unit 5 - Machine Learning and Statistical Fallacies<a class="headerlink" href="#unit-5-machine-learning-and-statistical-fallacies" title="Link to this heading">#</a></h2>
<section id="machine-learning">
<h3><span class="section-number">12.7.1. </span>Machine Learning<a class="headerlink" href="#machine-learning" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importing modules</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">guessed_balls</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1">#guessed balls</span>
<span class="n">lottery_balls</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1">#lottery balls</span>
<span class="c1"># set high level stats</span>
<span class="n">plays</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ticket_spending</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">winnings</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># set records of winnings</span>
<span class="n">jackpot</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">five_white</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">four_white_mega</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">four_white</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">three_white_mega</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">three_white</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">two_white_mega</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">one_white_mega</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">mega</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">dud</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">won</span> <span class="o">=</span> <span class="n">plays</span><span class="o">-</span><span class="n">dud</span>

<span class="c1"># 这个循环 Loop 跑了两个小时</span>

<span class="k">while</span> <span class="n">guessed_balls</span> <span class="o">!=</span> <span class="n">lottery_balls</span><span class="p">:</span>
    
    <span class="n">guessed_balls</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">69</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">guessed_balls_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">guessed_balls</span><span class="p">)</span>
    <span class="n">guessed_megaball</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">26</span><span class="p">)</span>
    <span class="n">guessed_balls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">guessed_megaball</span><span class="p">)</span>  <span class="c1"># 加入附加球</span>

    <span class="n">lottery_balls</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">69</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">lottery_balls_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">lottery_balls</span><span class="p">)</span>
    <span class="n">lottery_megaball</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">26</span><span class="p">)</span>
    <span class="n">lottery_balls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lottery_megaball</span><span class="p">)</span>  <span class="c1"># 加入附加球</span>
    
    <span class="n">difference_whites</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">guessed_balls_set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">lottery_balls_set</span><span class="p">))</span>
    <span class="n">plays</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="n">ticket_spending</span> <span class="o">+=</span><span class="mi">2</span>
    
    <span class="c1">#dud1</span>
    <span class="k">if</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">dud</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="c1">#dud2</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">dud</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="c1">#dud3</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">dud</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="c1">#just megaball</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">mega</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="c1">#1white and megaball</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">one_white_mega</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">4</span>
    <span class="c1">#2white and megaball</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">two_white_mega</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">10</span> 
    <span class="c1">#3white</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">three_white</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">10</span>
    <span class="c1">#3white and megaball</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">three_white_mega</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">200</span>
    <span class="c1">#4white</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">four_white</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">500</span>
    <span class="c1">#4white and megaball</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">four_white_mega</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">10000</span>
    <span class="c1">#5white</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">!=</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">five_white</span> <span class="o">+=</span><span class="mi">1</span> 
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">1000000</span>
        <span class="k">break</span>
    <span class="c1">#jackpot</span>
    <span class="k">elif</span> <span class="n">difference_whites</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">guessed_megaball</span> <span class="o">==</span> <span class="n">lottery_megaball</span><span class="p">:</span>
        <span class="n">jackpot</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">winnings</span> <span class="o">+=</span> <span class="mi">197000000</span>
        <span class="k">break</span>
<span class="nb">print</span><span class="p">(</span><span class="n">winnings</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="n">animals</span><span class="o">=</span><span class="p">[]</span>
<span class="n">columnLabels</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
    <span class="n">columnLabels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
<span class="n">rowLabels</span><span class="o">=</span><span class="n">columnLabels</span><span class="p">[:]</span>
<span class="n">tableVals</span><span class="o">=</span><span class="p">[]</span>
<span class="c1">#Get distances between pairs of animals</span>
<span class="c1">#For each row</span>
<span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
    <span class="n">row</span><span class="o">=</span><span class="p">[]</span>
    <span class="c1">#For each column</span>
    <span class="k">for</span> <span class="n">a2</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">a1</span><span class="o">==</span><span class="n">a2</span><span class="p">:</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">distance</span><span class="o">=</span><span class="n">a1</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">precision</span><span class="p">)))</span>
    <span class="n">tableVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="n">table</span><span class="o">=</span><span class="n">pylab</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">rowLabels</span><span class="o">=</span><span class="n">rowLabels</span><span class="p">,</span> <span class="n">colLabels</span><span class="o">=</span><span class="n">columnLabels</span><span class="p">,</span> <span class="n">cellText</span><span class="o">=</span><span class="n">tableVals</span><span class="p">,</span> <span class="n">cellLoc</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="mf">0.138</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">animals</span><span class="p">))</span>
<span class="n">table</span><span class="o">.</span><span class="n">auto_set_font_size</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;distances&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="statistical-fallacies">
<h3><span class="section-number">12.7.2. </span>Statistical Fallacies<a class="headerlink" href="#statistical-fallacies" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="n">numCasesPerYear</span><span class="o">=</span><span class="mi">40000</span>
<span class="n">numYears</span><span class="o">=</span><span class="mi">3</span>
<span class="n">stateSize</span><span class="o">=</span><span class="mi">10000</span>
<span class="n">comSize</span><span class="o">=</span><span class="mi">10</span>
<span class="n">numComs</span><span class="o">=</span><span class="n">stateSize</span><span class="o">//</span><span class="n">comSize</span>
<span class="n">numTrials</span><span class="o">=</span><span class="mi">100</span>
<span class="n">numGreater</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
    <span class="n">locs</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">numComs</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numYears</span><span class="o">*</span><span class="n">numCasesPerYear</span><span class="p">):</span>
        <span class="n">locs</span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numComs</span><span class="p">))]</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">locs</span><span class="p">[</span><span class="mi">111</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">143</span><span class="p">:</span>
        <span class="n">numGreater</span><span class="o">+=</span><span class="mi">1</span>
<span class="n">prob</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">numGreater</span><span class="o">/</span><span class="n">numTrials</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Est. probability of 111 having at least 143 cases =&#39;</span><span class="p">,</span> <span class="n">prob</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="final-exam">
<h2><span class="section-number">12.8. </span>Final Exam<a class="headerlink" href="#final-exam" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span><span class="o">,</span><span class="w"> </span><span class="nn">pylab</span>
<span class="n">xVals</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">yVals</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">wVals</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">xVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
    <span class="n">yVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
    <span class="n">wVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
<span class="n">xVals</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">xVals</span><span class="p">)</span>
<span class="n">yVals</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">yVals</span><span class="p">)</span>
<span class="n">wVals</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">wVals</span><span class="p">)</span>
<span class="n">xVals</span> <span class="o">=</span> <span class="n">xVals</span> <span class="o">+</span> <span class="n">xVals</span>
<span class="n">zVals</span> <span class="o">=</span> <span class="n">xVals</span> <span class="o">+</span> <span class="n">yVals</span>
<span class="n">tVals</span> <span class="o">=</span> <span class="n">xVals</span> <span class="o">+</span> <span class="n">yVals</span> <span class="o">+</span> <span class="n">wVals</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xVals</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">yVals</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
        
<span class="k">class</span><span class="w"> </span><span class="nc">Lecture</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listen</span><span class="p">,</span> <span class="n">sleep</span><span class="p">,</span> <span class="n">fb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listen</span> <span class="o">=</span> <span class="n">listen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sleep</span> <span class="o">=</span> <span class="n">sleep</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fb</span> <span class="o">=</span> <span class="n">fb</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_listen_prob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">listen</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sleep_prob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sleep</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_fb_prob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fb</span>
     
<span class="k">def</span><span class="w"> </span><span class="nf">get_mean_and_std</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>
    <span class="n">tot</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
        <span class="n">tot</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">std</span> <span class="o">=</span> <span class="p">(</span><span class="n">tot</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>
    <span class="k">return</span> <span class="n">mean</span><span class="p">,</span> <span class="n">std</span>
        
<span class="k">def</span><span class="w"> </span><span class="nf">lecture_activities</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">aLecture</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    N: integer, number of trials to run</span>
<span class="sd">    aLecture: Lecture object</span>
<span class="sd"> </span>
<span class="sd">    Runs a Monte Carlo simulation N times.</span>
<span class="sd">    Returns: a tuple, (float, float)</span>
<span class="sd">             Where the first float represents the mean number of lectures it takes </span>
<span class="sd">             to have a lecture in which all 3 activities take place,</span>
<span class="sd">             And the second float represents the total width of the 95% confidence </span>
<span class="sd">             interval around that mean.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">prob</span><span class="o">=</span><span class="n">aLecture</span><span class="o">.</span><span class="n">listen</span><span class="o">*</span><span class="n">aLecture</span><span class="o">.</span><span class="n">sleep</span><span class="o">*</span><span class="n">aLecture</span><span class="o">.</span><span class="n">fb</span>
    <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">times</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">times</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="n">prob</span><span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>
                <span class="k">break</span>
    <span class="n">mean</span><span class="p">,</span> <span class="n">std</span><span class="o">=</span><span class="n">get_mean_and_std</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">ho</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="n">std</span>
    <span class="n">tup</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">prob</span><span class="p">,</span> <span class="n">ho</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tup</span>

          
<span class="c1"># sample test cases </span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Lecture</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lecture_activities</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
<span class="c1"># the above test should print out (1.0, 0.0)</span>
          
<span class="n">b</span> <span class="o">=</span> <span class="n">Lecture</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lecture_activities</span><span class="p">(</span><span class="mi">100000</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
<span class="c1"># the above test should print out something reasonably close to (2.0, 5.516)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">makeHistogram</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">numBins</span><span class="p">,</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      - values, a list of numbers</span>
<span class="sd">      - numBins, a positive int</span>
<span class="sd">      - xLabel, yLabel, title, are strings</span>
<span class="sd">      - Produces a histogram of values with numBins bins and the indicated labels</span>
<span class="sd">        for the x and y axes</span>
<span class="sd">      - If title is provided by caller, puts that title on the figure and otherwise</span>
<span class="sd">        does not title the figure</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">numBins</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">title</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xLabel</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">yLabel</span><span class="p">)</span>
    <span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="c1"># You are given this function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">getMeanAndStd</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>
    <span class="n">tot</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
        <span class="n">tot</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">std</span> <span class="o">=</span> <span class="p">(</span><span class="n">tot</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>
    <span class="k">return</span> <span class="n">mean</span><span class="p">,</span> <span class="n">std</span>
<span class="c1"># You are given this class</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Die</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valList</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">possibleVals</span> <span class="o">=</span> <span class="n">valList</span><span class="p">[:]</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">roll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">possibleVals</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">getAverage</span><span class="p">(</span><span class="n">die</span><span class="p">,</span> <span class="n">numRolls</span><span class="p">,</span> <span class="n">numTrials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - die: a Die object</span>
<span class="sd">    - numRolls: number of rolls per trial</span>
<span class="sd">    - numTrials: number of trials</span>

<span class="sd">    Calculates the average length of the longest consecutive run of a single number in multiple dice rolls.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The average length of the longest run, rounded to 3 decimal places.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">longest_runs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">die</span><span class="o">.</span><span class="n">roll</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRolls</span><span class="p">)]</span>  <span class="c1"># Get rolls directly</span>
        <span class="n">longest_run</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Track length, not the run itself</span>
        <span class="n">current_run</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Start with 1 as a single roll is a run</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)):</span>  <span class="c1"># Start at index 1 for comparison</span>
            <span class="k">if</span> <span class="n">numbers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">numbers</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">current_run</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">longest_run</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">longest_run</span><span class="p">,</span> <span class="n">current_run</span><span class="p">)</span>
                <span class="n">current_run</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Reset run length</span>
        <span class="n">longest_run</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">longest_run</span><span class="p">,</span> <span class="n">current_run</span><span class="p">)</span> <span class="c1"># Handle last run</span>
        <span class="n">longest_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">longest_run</span><span class="p">)</span>
    <span class="n">makeHistogram</span><span class="p">(</span><span class="n">longest_runs</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;xlabel&#39;</span><span class="p">,</span> <span class="s1">&#39;ylabel&#39;</span><span class="p">)</span>
    <span class="n">mean</span><span class="p">,</span> <span class="n">std</span> <span class="o">=</span> <span class="n">getMeanAndStd</span><span class="p">(</span><span class="n">longest_runs</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">getAverage</span><span class="p">(</span><span class="n">Die</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pylab</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="kn">import</span> <span class="n">polyfit</span><span class="p">,</span> <span class="n">polyval</span>

<span class="c1"># Global Variables</span>
<span class="n">MAXRABBITPOP</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">CURRENTRABBITPOP</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">CURRENTFOXPOP</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">numSteps</span><span class="o">=</span><span class="mi">200</span>

<span class="k">def</span><span class="w"> </span><span class="nf">rabbitGrowth</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    rabbitGrowth is called once at the beginning of each time step.</span>

<span class="sd">    It makes use of the global variables: CURRENTRABBITPOP and MAXRABBITPOP.</span>

<span class="sd">    The global variable CURRENTRABBITPOP is modified by this procedure.</span>

<span class="sd">    For each rabbit, based on the probabilities in the problem set write-up, </span>
<span class="sd">      a new rabbit may be born.</span>
<span class="sd">    Nothing is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># you need this line for modifying global variables</span>
    <span class="k">global</span> <span class="n">CURRENTRABBITPOP</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">CURRENTRABBITPOP</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">CURRENTRABBITPOP</span><span class="o">/</span><span class="n">MAXRABBITPOP</span><span class="p">)):</span>
            <span class="n">CURRENTRABBITPOP</span><span class="o">+=</span><span class="mi">1</span>
            
<span class="k">def</span><span class="w"> </span><span class="nf">foxGrowth</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    foxGrowth is called once at the end of each time step.</span>

<span class="sd">    It makes use of the global variables: CURRENTFOXPOP and CURRENTRABBITPOP,</span>
<span class="sd">        and both may be modified by this procedure.</span>

<span class="sd">    Each fox, based on the probabilities in the problem statement, may eat </span>
<span class="sd">      one rabbit (but only if there are more than 10 rabbits).</span>

<span class="sd">    If it eats a rabbit, then with a 1/3 prob it gives birth to a new fox.</span>

<span class="sd">    If it does not eat a rabbit, then with a 1/10 prob it dies.</span>

<span class="sd">    Nothing is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># you need these lines for modifying global variables</span>
    <span class="k">global</span> <span class="n">CURRENTRABBITPOP</span>
    <span class="k">global</span> <span class="n">CURRENTFOXPOP</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">CURRENTFOXPOP</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="p">(</span><span class="n">CURRENTRABBITPOP</span><span class="o">/</span><span class="n">MAXRABBITPOP</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">CURRENTRABBITPOP</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                <span class="n">CURRENTRABBITPOP</span><span class="o">-=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">CURRENTFOXPOP</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">&lt;=</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">CURRENTFOXPOP</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                   <span class="n">CURRENTFOXPOP</span><span class="o">-=</span><span class="mi">1</span>
    
            
<span class="k">def</span><span class="w"> </span><span class="nf">runSimulation</span><span class="p">(</span><span class="n">numSteps</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the simulation for `numSteps` time steps.</span>

<span class="sd">    Returns a tuple of two lists: (rabbit_populations, fox_populations)</span>
<span class="sd">      where rabbit_populations is a record of the rabbit population at the </span>
<span class="sd">      END of each time step, and fox_populations is a record of the fox population</span>
<span class="sd">      at the END of each time step.</span>

<span class="sd">    Both lists should be `numSteps` items long.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rabbitPop</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">foxPop</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSteps</span><span class="p">):</span>
        <span class="n">rabbitGrowth</span><span class="p">()</span>
        <span class="n">foxGrowth</span><span class="p">()</span>
        <span class="n">rabbitPop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CURRENTRABBITPOP</span><span class="p">)</span>
        <span class="n">foxPop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CURRENTFOXPOP</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">rabbitPop</span><span class="p">,</span> <span class="n">foxPop</span><span class="p">)</span>

<span class="n">rabbitPop</span><span class="p">,</span> <span class="n">foxPop</span><span class="o">=</span><span class="n">runSimulation</span><span class="p">(</span><span class="n">numSteps</span><span class="p">)</span>
<span class="n">coeff</span> <span class="o">=</span> <span class="n">polyfit</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rabbitPop</span><span class="p">)),</span> <span class="n">rabbitPop</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">polyval</span><span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rabbitPop</span><span class="p">))))</span>
<span class="n">coef</span><span class="o">=</span><span class="n">polyfit</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">foxPop</span><span class="p">)),</span> <span class="n">foxPop</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">polyval</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">foxPop</span><span class="p">))))</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Rabbit Pop&#39;</span><span class="p">,</span> <span class="s1">&#39;Fox Pop&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_combination</span><span class="p">(</span><span class="n">choices</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    choices: a non-empty list of ints</span>
<span class="sd">    total: a positive int</span>
<span class="sd"> </span>
<span class="sd">    Returns result, a numpy.array of length len(choices) </span>
<span class="sd">    such that</span>
<span class="sd">        * each element of result is 0 or 1</span>
<span class="sd">        * sum(result*choices) == total</span>
<span class="sd">        * sum(result) is as small as possible</span>
<span class="sd">    In case of ties, returns any result that works</span>
<span class="sd">    If there is no result that gives the exact total, </span>
<span class="sd">    pick the one that gives sum(result*choices) closest </span>
<span class="sd">    to total without going over</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">undefined</span><span class="o">=</span><span class="kc">True</span>
    <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">choice</span><span class="o">&lt;=</span><span class="n">total</span><span class="p">:</span>
            <span class="n">undefined</span><span class="o">=</span><span class="kc">False</span>
    <span class="k">if</span> <span class="n">undefined</span><span class="p">:</span>
        <span class="n">array</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sublists</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates all sublists of a list recursively.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lst</span><span class="p">:</span>  <span class="c1"># Base case: Empty list has only itself as a sublist</span>
            <span class="k">return</span> <span class="p">[[]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sublists</span> <span class="o">=</span> <span class="n">get_sublists</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>  <span class="c1"># Recursive call on remaining elements</span>
            <span class="k">return</span> <span class="n">sublists</span> <span class="o">+</span> <span class="p">[[</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="n">sublist</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">sublists</span><span class="p">]</span>
    <span class="n">closest</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">closest_poses</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">sums</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">possibilities</span><span class="o">=</span><span class="n">get_sublists</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
    <span class="n">possibilities</span><span class="o">=</span><span class="n">possibilities</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">for</span> <span class="n">possibility</span> <span class="ow">in</span> <span class="n">possibilities</span><span class="p">:</span>
        <span class="n">sums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">possibility</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sums</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">sums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">total</span> <span class="ow">and</span> <span class="n">sums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&gt;=</span><span class="n">closest</span><span class="p">:</span>
            <span class="n">closest</span><span class="o">=</span><span class="n">sums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">closest_pos</span><span class="o">=</span><span class="n">possibilities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">closest_poses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">closest_pos</span><span class="p">)</span>
    <span class="n">num</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
    <span class="n">closest_pos</span><span class="o">=</span><span class="n">num</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">closest_poses</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">&lt;=</span><span class="nb">len</span><span class="p">(</span><span class="n">closest_poses</span><span class="p">):</span>
            <span class="n">closest_pos</span><span class="o">=</span><span class="n">pos</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">choices</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">choices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">in</span> <span class="n">closest_pos</span><span class="p">:</span>
            <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="n">find_combination</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Course_MIT6001Python.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">11. </span>MIT_CS6001-Python</p>
      </div>
    </a>
    <a class="right-next"
       href="Course_MCM.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13. </span>Math Computational Methods</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">12.1. Imports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-1-optimization-problems">12.2. Unit 1 - Optimization Problems</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#knapsack-problem">12.2.1. Knapsack Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#brute-force">12.2.2. Brute Force</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-theory">12.2.3. Graph Theory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-1">12.2.4. Problem Set 1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-2-stochastic-thinking-and-random-walks">12.3. Unit 2 - Stochastic Thinking and Random Walks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">12.3.1. Plotting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stochastic-thinking">12.3.2. Stochastic Thinking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-walks">12.3.3. Random Walks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-2">12.3.4. Problem Set 2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-3-inferential-statistics-and-monte-carlo-simulations">12.4. Unit 3 - Inferential Statistics and Monte Carlo Simulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inferential-statistics">12.4.1. Inferential Statistics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monte-carlo-simulations">12.4.2. Monte Carlo Simulations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-3">12.4.3. Problem Set 3</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#midterm-exam">12.5. Midterm Exam</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-4-experimental-data">12.6. Unit 4 - Experimental Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#experimental-data-part-1">12.6.1. Experimental Data Part 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#experimental-data-part-2">12.6.2. Experimental Data Part 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-set-4">12.6.3. Problem Set 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-5-machine-learning-and-statistical-fallacies">12.7. Unit 5 - Machine Learning and Statistical Fallacies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">12.7.1. Machine Learning</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-fallacies">12.7.2. Statistical Fallacies</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-exam">12.8. Final Exam</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jonny, assisted by Tom
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>